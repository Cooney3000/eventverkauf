{"version":3,"sources":["components/functions.js","components/Defaults.js","components/Platz.js","components/DayPicker.js","components/Belegungstag.js","components/BelForm.js","components/BelDetails.js","components/Routing.js","components/App.js","index.js"],"names":["formatDate","d","month","getMonth","day","getDate","year","getFullYear","length","join","spielerzusatz","geburtsdatum","aktuellesJahr","Date","geburtsjahr","nvb","config","hostname","protokoll","loginPage","prod","testuser","id","vorname","nachname","permissions","stringSeparator","smartphoneWidth","anzahlPlaetze","platzArray","daypickerMaxDays","daypickerDaysBeforeToday","buchungenlog","platzbuchungen","dailyStartTime","dailyEndTime","eveningTime","singleTime","doubleTime","turnierTime","gastId","ERR","messages","gast","veranstaltung","spieleranzahl","jugendvorrecht","erwachsenenvorrecht","einzeldauer","doppeldauer","turnierspieldauer","zeit","platzbelegt","i","push","NONE","MYDATA_READ","MYDATA_WRITE","MYDATA_UPDATE","ALLDATA_READ","ALLDATA_WRITE","ALLDATA_UPDATE","PERMISSION_FREE_2","PERMISSION_FREE_3","T_ALL_PERMISSIONS","VORSTAND","T_REGISTER","PERMISSION_FREE_5","PERMISSION_FREE_6","PERMISSION_FREE_7","PERMISSION_FREE_8","PERMISSION_FREE_9","PERMISSION_FREE_10","PERMISSION_UPDATE","ADMINISTRATOR","Platz","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleWindowSizeChange","setState","zumBelegungstag","state","courtData","isLoading","error","width","window","innerWidth","nextProps","court","fetchPlatz","_this$props","_this2","userIsAdmin","url","Config","addEventListener","fetch","credentials","then","result","ok","json","records","map","r","k","cn","s","e","bookingType","p1geb","p2geb","p3geb","p4geb","dauer","Number","substring","bt","overbooked","classNames","replace","computeBelClasses","starts_at","ends_at","booking_type","spieler","p1","RegExp","p2","p3","p4","match","react_default","a","createElement","key","className","comment","Link","to","pathname","c","removeEventListener","Component","list","MenuItem","_ref","text","selected","concat","Arrow","_ref2","ArrowLeft","ArrowRight","DayPicker","onSelect","onClickHandler","startswith","end","setDate","start","dt","arr","name","toLocaleDateString","weekday","getDateArray","menu","el","DayPicker_MenuItem","build_default","data","arrowLeft","arrowRight","Belegungstag","dayDate","params","isNaN","setDay","bind","dString","firstDaypickerDay","courtDiv","Belegungstag_Zeitleiste","src","alt","components_Platz","components_DayPicker","react_swipeable_views_lib_default","Belegungstag_Legende","Zeitleiste","m","toString","padStart","index","Fragment","Legende","BelForm","handleChange","assertThisInitialized","handleSave","handleDelete","_r$starts_at$split","split","_r$starts_at$split2","slicedToArray","sd","st","dateIsToday","deleteActive","Permissions","_r$ends_at$split","_r$ends_at$split2","ed","et","sdA","spieltag","startsAtDate","endsAtDate","startsAtStd","startsAtViertel","endsAtStd","endsAtViertel","p1id","p2id","p3id","p4id","zurTafel","saveActive","admin","jugend","nichtVollBerechtigte","Error","catch","_this3","Redirect","vorstand","onChange","value","startsAtMsgClass","startsAtMsgTxt","endsAtMsgClass","disabled","p1MsgClass","p1MsgTxt","p1MsgFormCtrl","commentMsgClass","commentMsgTxt","type","placeholder","onClick","_this4","preventDefault","parameters","userId","returncode","logurl","_Messages$platzbelegt","Messages","_this5","sdStr","jetzt","_this6","defineProperty","target","condAbendZeit","condEinGast","condEinSpielerJug","condEinSpielerErw","condDoppelteSpieler","datestring","hd","Holidays","init","condSonnOderFeiertag","isHoliday","getDay","condPlatz6","ende","pKeys","_","find","_this6$state","forEach","p","_Messages$spieleranza","p1msgClass","_Messages$spieleranza2","_Messages$spieleranza3","uniq","_Messages$spieleranza4","_Messages$gast","_Messages$spieleranza5","_Messages$veranstaltu","_Messages$jugendvorre","_Messages$erwachsenen","_Messages$zeit","_Messages$einzeldauer","_Messages$doppeldauer","_Messages$turnierspie","BelDetails","belegung","op","_this$props$location$","location","updateBel","_this$props$location$2","newBel","components_BelForm","user_id","getEmptyBel","Routing","Switch","Route","exact","path","render","components_BelDetails","assign","components_Belegungstag","App","user","isLoggedIn","renderData","isLoading1","isLoading2","checkUser","setPermission","res","retcode","href","_this$state","components_Routing","ReactDOM","BrowserRouter","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.cfe9574f.chunk.js","sourcesContent":["export function formatDate (d) {\r\n  var month = '' + (d.getMonth() + 1),\r\n      day = '' + d.getDate(),\r\n      year = d.getFullYear();\r\n\r\n  if (month.length < 2) month = '0' + month;\r\n  if (day.length < 2) day = '0' + day;\r\n\r\n  return [year, month, day].join('-');  \r\n}\r\n// ***** date array \r\nexport const getDateArray = function(start, end) {\r\n  let dt = new Date(start),\r\n      arr = [];\r\n  while (dt <= end) {\r\n    arr.push({ name: formatDate(dt), text: dt.toLocaleDateString(\"de-DE\",{ weekday: 'short', month: 'short', day: 'numeric' })});\r\n    dt.setDate(dt.getDate() + 1);\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport function isValidDate(d) {\r\n  return d instanceof Date && !isNaN(d);\r\n}\r\n\r\nexport function spielerzusatz(geburtsdatum) \r\n{\r\n  let aktuellesJahr = new Date();\r\n  aktuellesJahr = aktuellesJahr.getFullYear();\r\n  let geburtsjahr = new Date(geburtsdatum);\r\n  geburtsjahr = geburtsjahr.getFullYear();\r\n  const jugend = (aktuellesJahr - geburtsjahr) < 18 ? true : false;\r\n  // console.log(`${geburtsdatum} ${geburtsjahr} ${aktuellesJahr} ${jugend}` );\r\n  return jugend ? ' (Jugend)' : '';\r\n}\r\n\r\nexport function nvb(geburtsdatum) // nvb = nicht voll Berechtigt\r\n{\r\n  if (typeof(geburtsdatum) === 'undefined' || geburtsdatum === null)\r\n  {\r\n    return false;\r\n  }\r\n  // später Schnuppermitglieder hier dazunehmen\r\n  let aktuellesJahr = new Date();\r\n  aktuellesJahr = aktuellesJahr.getFullYear();\r\n  let geburtsjahr = new Date(geburtsdatum);\r\n  geburtsjahr = geburtsjahr.getFullYear();\r\n  const jugend = (aktuellesJahr - geburtsjahr) < 18 ? true : false;\r\n  // console.log(`${geburtsdatum} ${geburtsjahr} ${aktuellesJahr} ${jugend}` );\r\n  return jugend;\r\n}\r\n\r\n\r\n\r\n// Auswahl über Mausposition???\r\n// handleClick (e) {\r\n  \r\n//   var offset = $(this).offset();\r\n//   var hoehe = $(this).height(); \r\n//   var relativeX = (e.pageX - offset.left);\r\n//   var relativeY = (e.pageY - offset.top);\r\n//   var halbeStdHoehe = (hoehe - 30)/13;     \r\n//   var std = relativeY/halbeStdHoehe;\r\n//   var minuten = Math.round((std - Math.floor(std))) * 30;\r\n//   std = Math.floor(std) + 7;\r\n\r\n//   alert(\"X: \" + relativeX + \"  Y: \" + relativeY + \" Zeit: \" + std + \":\" + minuten + \" h, Höhe: \" + hoehe);\r\n    \r\n// };\r\n","\r\n// ****** Konfigurationsdaten *******\r\nconst config = {\r\n\r\n  hostname: 'localhost',\r\n  protokoll: 'http://',\r\n  loginPage: '/intern/login.php',\r\n  prod: false,\r\n  \r\n  // hostname: 'localhost',\r\n  // protokoll: 'http://',\r\n  // loginPage: '/intern/login.php',\r\n  // prod: true,\r\n  \r\n  // hostname: 'www.tcolching.de',\r\n  // protokoll: 'https://',\r\n  // loginPage: '/intern/login.php',\r\n  // prod: true,\r\n  \r\n  // testuser: {id:211, vorname:'Hart', nachname:'VerdrahtetAdm', permissions: 65535}, // mit Adminrechten\r\n  testuser: {id:307, vorname:'Hart', nachname:'VerdrahtetUsr', permissions: 0}, // mit normalen Benutzerrechten\r\n  stringSeparator: ' ',\r\n  smartphoneWidth: 578,\r\n  anzahlPlaetze: 6,\r\n  platzArray: [],\r\n  daypickerMaxDays: 180,\r\n  daypickerDaysBeforeToday: 3, \r\n  buchungenlog: '/intern/api/buchungenlog.php',\r\n  platzbuchungen: '/intern/api/platz.php',\r\n\r\n  dailyStartTime: 8,\r\n  dailyEndTime: 20,\r\n  eveningTime: 1800,  // 18:00 Uhr\r\n  singleTime: 100, // = 1 Stunde\r\n  doubleTime: 130, // = 1,5 Stunden (1 Stunde, 30 Minuten)\r\n  turnierTime: 200, // = 2 Stunden \r\n  gastId: 1,\r\n}\r\n\r\nconst ERR = \"text-danger\"\r\nconst MSG = \"text-info\"\r\nconst NOSAVE = false\r\nconst SAVE = true\r\n\r\nexport const messages = {\r\n  gast: [MSG, SAVE, '- Bitte den Gastnamen ins Kommentarfeld schreiben!'],\r\n  veranstaltung: [MSG, SAVE, '- Bitte den Veranstaltungsanlass ins Kommentarfeld schreiben!'],\r\n  spieleranzahl: [ERR, NOSAVE, '- Bitte alle Spieler eintragen!'],\r\n  jugendvorrecht: [ERR, SAVE, '- Achtung: Jugendliche haben auf Platz 6 zu dieser Zeit Vorrecht!'],\r\n  erwachsenenvorrecht: [ERR, SAVE, '- Achtung: Erwachsene Vollmitglieder haben zu dieser Zeit Vorrecht!'],\r\n  einzeldauer: [ERR, NOSAVE, '- Für ein Einzel maximal 60 Minuten buchen'],\r\n  doppeldauer: [ERR, NOSAVE, '- Für ein Doppel maximal 90 Minuten buchen'],\r\n  turnierspieldauer: [ERR, NOSAVE, '- Für ein Turnierspiel 120 Minuten buchen'],\r\n  zeit: [ERR, NOSAVE, '- Der Start muss vor dem Ende liegen!'],\r\n  platzbelegt:  [ERR, NOSAVE, '- Platz bereits belegt!'],\r\n};\r\nfor (let i = 1; i <= config.anzahlPlaetze; i++) {\r\n  config.platzArray.push(i);\r\n}\r\n\r\n// ******* Rechtevergabe **********\r\nexport const permissions = {\r\n  // Es gibt 16 Rechte. Übereinandergelegt\r\n  \r\n  // Recht:        1 2 3 4  5  6  7   8   9  10   11   12   13   14    15    16\r\n  // Dezimalwert:  1 2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384 32768 \r\n  //\r\n  // Summen daraus sind kombinierte Rechte, z.B. \r\n  //                3 ist Recht 1 und Recht 2\r\n  //               15 ist Recht 1, 2, 3, 4 (1+2+4+8)\r\n  //              128 ist Recht 8\r\n  //              143 ist Recht 1,2,3,4,8\r\n    NONE : 0,\r\n    MYDATA_READ : 1,\r\n    MYDATA_WRITE : 2,\r\n    MYDATA_UPDATE : 3,          // kombiniert\r\n    ALLDATA_READ : 5,           // kombiniert\r\n    ALLDATA_WRITE : 8,  \r\n    ALLDATA_UPDATE : 15,        // kombiniert\r\n    PERMISSION_FREE_2 : 32,\r\n    PERMISSION_FREE_3 : 64,\r\n    T_ALL_PERMISSIONS : 128,    // Turnierverantwortliche\r\n    VORSTAND : 144,             // kombiniert Vorstand und Turnierverantwortliche\r\n    T_REGISTER : 256,\r\n    PERMISSION_FREE_5 : 512,\r\n    PERMISSION_FREE_6 : 1024,\r\n    PERMISSION_FREE_7 : 2048,\r\n    PERMISSION_FREE_8 : 4096,\r\n    PERMISSION_FREE_9 : 8192,\r\n    PERMISSION_FREE_10 : 16384,\r\n    PERMISSION_UPDATE : 32768,\r\n    ADMINISTRATOR : 65535,\r\n};\r\n\r\nexport default config;\r\n","import React, { Component } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\nimport { spielerzusatz, nvb } from './functions';\r\nimport Config, { permissions } from './Defaults';\r\n\r\n\r\n// Alle Belegungen an diesem Tag für einen Platz\r\n\r\nclass Platz extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      courtData: [],\r\n      isLoading : false,\r\n      error : false,\r\n      width: window.innerWidth,\r\n      zumBelegungstag: false,\r\n    };\r\n  }\r\n  \r\n  componentWillReceiveProps(nextProps) {\r\n    const {court, day} = nextProps;\r\n    this.fetchPlatz(court, day);\r\n  }\r\n\r\n  componentWillMount() {\r\n    const { court, day } = this.props;\r\n    this.fetchPlatz(court, day);\r\n  }\r\n\r\n  fetchPlatz(court, day) {\r\n    const userIsAdmin = (permissions.T_ALL_PERMISSIONS === (permissions.T_ALL_PERMISSIONS & this.props.permissions));\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/platz.php?op=ra&p=\" + court + \"&ds=\" + day + \"&de=\" + day;\r\n    window.addEventListener('resize', this.handleWindowSizeChange);\r\n    \r\n    this.setState({isLoading : true});\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then(result => {\r\n      if (result.ok) {\r\n          return result.json();\r\n        } else {\r\n          // In diesem Fall haben wir einen neuen, noch unbebuchten Tag\r\n          this.setState({isLoading : false});\r\n        }\r\n      })\r\n    .then (result => {\r\n      let courtData = result.records.map ( r => {\r\n        let k = r.id;\r\n        let cn = computeBelClasses (r.starts_at, r.ends_at, r.booking_type, r.p1geb, r.p2geb, r.p3geb, r.p4geb);\r\n        let spieler = \r\n            r.p1.replace(new RegExp(\"^[\\\\.\\\\s]+\"), \"\") + spielerzusatz(r.p1geb)\r\n          + (r.p2 ? ', ' + r.p2.replace(new RegExp(\"^[\\\\.\\\\s]+\"), \"\") : ' ') + spielerzusatz(r.p2geb)\r\n          + (r.p3 ? ', ' + r.p3.replace(new RegExp(\"^[\\\\.\\\\s]+\"), \"\") : ' ') + spielerzusatz(r.p3geb)\r\n          + (r.p4 ? ', ' + r.p4.replace(new RegExp(\"^[\\\\.\\\\s]+\"), \"\") : ' ') + spielerzusatz(r.p4geb);\r\n        if ( !userIsAdmin && (r.booking_type.match(/(ts-training)|(ts-nichtreservierbar)/ig)))\r\n        {\r\n          return ( \r\n            <div key={k} className={cn}>\r\n              <strong>{r.starts_at.substring(11,16)}</strong> {spieler} \r\n              <div> {r.comment} </div>\r\n            </div>\r\n          )\r\n        } else {\r\n          return ( \r\n            <Link key={k} className={cn} to={{ pathname: '/belegungsdetails/update', state: {c: court, i: r.id, d: day} }}>\r\n              <strong>{r.starts_at.substring(11,16)}</strong> {spieler}\r\n              <div> {r.comment} </div>\r\n            </Link>\r\n          )\r\n        }\r\n      })\r\n      this.setState({courtData: courtData});\r\n      this.setState({isLoading : false});\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleWindowSizeChange);\r\n  }\r\n\r\n  handleWindowSizeChange = () => {\r\n    // this.setState({ width: window.innerWidth });\r\n    this.setState({ zumBelegungstag: true });\r\n  };\r\n  \r\n  render() {\r\n    return this.state.courtData;\r\n  }\r\n}\r\n\r\n// CSS-Klassen bilden für die Positionierung und Höhe einer Blegung auf der Tafel\r\nfunction computeBelClasses (s, e, bookingType, p1geb, p2geb, p3geb, p4geb) {\r\n\r\n  // Dauer berechnen, also z. B. '2019-05-02 16:00:00' - '2019-05-02 14:00:00' = 120\r\n  const dauer = (Number(e.substring(11,13))*60 + Number(e.substring(14,16))) - (Number(s.substring(11,13))*60 + Number(s.substring(14,16)));\r\n  const bt = bookingType\r\n  const overbooked = ( (bt === 'ts-einzel' && dauer > 60) || (bt === 'ts-doppel' && dauer > 120) \r\n                        || (e.substring(11,16) > \"17:00\" && (nvb(p1geb) || nvb(p2geb) || nvb(p3geb) || nvb(p4geb))) ) ? 'overbooked' : '';\r\n  let cn = classNames(\r\n    'D-' + dauer,\r\n    'ts', \r\n    'T-' + s.substring(11, 16).replace(':', '-'),\r\n    bt,\r\n    overbooked\r\n    );\r\n  return cn;\r\n}\r\n\r\nexport default Platz;\r\n","import React, { Component } from 'react';\r\nimport ScrollMenu from 'react-horizontal-scrolling-menu';\r\nimport {getDateArray} from \"./functions\";\r\nimport Config from './Defaults';\r\n\r\n\r\n// Das ist das Array mit den Tagen\r\nlet list = [];\r\n\r\n// One item component\r\n// selected prop will be passed\r\nconst MenuItem = ({ text, selected }) => {\r\n  return (\r\n    <div className={`dateBtn ${selected ? 'aktiv' : ''}`}>\r\n      {text}\r\n    </div>\r\n  );\r\n};\r\n\r\n// All items component\r\n// Important! add unique key\r\nexport const Menu = (list) => list.map(el => {\r\n  const { name, text } = el;\r\n\r\n  return (\r\n    <MenuItem\r\n      text={text}\r\n      key={name}\r\n    />\r\n  );\r\n});\r\n\r\nconst Arrow = ({ text, className }) => {\r\n  return (\r\n    <div\r\n      // className={className}\r\n      className=\"dateBtn arrowPicker\"\r\n    >{text}</div>\r\n  );\r\n};\r\n\r\nconst ArrowLeft = Arrow({ text: '<', className: 'arrow-prev' });\r\nconst ArrowRight = Arrow({ text: '>', className: 'arrow-next' });\r\n\r\nclass DayPicker extends Component {\r\n  state = {\r\n    selected: 0\r\n  };\r\n\r\n  componentWillMount() {\r\n    const {startswith, day} = this.props;\r\n    let end = new Date(day);\r\n    end.setDate(end.getDate() + Config.daypickerMaxDays);\r\n    list = getDateArray(startswith, end);\r\n    this.setState({selected: day});\r\n  }\r\n\r\n  onSelect = key => {\r\n    this.setState({ selected: key }, () => this.props.onClickHandler(key));\r\n  }\r\n  render() {\r\n    const { selected } = this.state;\r\n    // Create menu from items\r\n    const menu = Menu(list, selected);\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <ScrollMenu\r\n          data={menu}\r\n          arrowLeft={ArrowLeft}\r\n          arrowRight={ArrowRight}\r\n          selected={selected}\r\n          onSelect={this.onSelect}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default DayPicker;\r\n  \r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport Platz from \"./Platz\";\r\nimport DayPicker from \"./DayPicker\";\r\nimport \"./tafel.css\";\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport config from './Defaults';\r\nimport {formatDate, isValidDate} from \"./functions\";\r\nimport { Link } from 'react-router-dom';\r\n\r\n// Layout eines Tages\r\n\r\nclass Belegungstag extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      width: window.innerWidth,\r\n      day: '',\r\n      dayDate: '',\r\n    };\r\n  }    \r\n  componentWillMount() {\r\n    window.addEventListener('resize', this.handleWindowSizeChange);\r\n    let dayDate = this.props.match.params.day;\r\n    if ( ! isValidDate(new Date(dayDate)) ) {\r\n      dayDate = new Date();\r\n    } else {\r\n      dayDate = new Date(dayDate);\r\n    }\r\n    this.setState({ dayDate: dayDate, day: formatDate(dayDate) });\r\n    // let day = \"2019-05-02\";\r\n    this.setDay = this.setDay.bind(this);\r\n  }\r\n\r\n  // make sure to remove the listener\r\n  // when the component is not mounted anymore\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleWindowSizeChange);\r\n  }\r\n\r\n  handleWindowSizeChange = () => {\r\n    this.setState({ width: window.innerWidth });\r\n  };\r\n\r\n  setDay(dString) {\r\n    const d = new Date(dString);\r\n    this.setState({dayDate: d, day: formatDate(d)});\r\n  }\r\n    \r\n  render() {\r\n    const { width } = this.state;\r\n    let firstDaypickerDay = new Date();\r\n    firstDaypickerDay.setDate(firstDaypickerDay.getDate() - config.daypickerDaysBeforeToday);\r\n    const isMobile = (width <= config.smartphoneWidth);\r\n    if (isMobile) {\r\n      const courtDiv = config.platzArray.map( (court) => {\r\n        return (<div key={court} id={\"platz\" + court}>\r\n          <table className=\"table\">\r\n            <tbody>\r\n              <tr className=\"platzDim\">\r\n                <td className=\"zeitleisteCol\"><Zeitleiste /></td>\r\n                <td className=\"platz\">\r\n                  <div className=\"platznummer\">\r\n                    <span className=\"platzziffer\">{court}</span> \r\n                    <Link to={{pathname: '/belegungsdetails/new', state: {c: court, d: this.state.day} }}><img  className=\"neuBtn p-1 rounded-circle\" src=\"images/add.png\" alt=\"Neue Belegung\" /></Link> \r\n                  </div>\r\n                  <div>\r\n                    <Platz court={court} day={this.state.day} permissions={this.props.permissions} />\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        )\r\n      })\r\n      return (\r\n        <div>\r\n          <DayPicker startswith={firstDaypickerDay} day={this.state.day} onClickHandler={this.setDay} />\r\n          <SwipeableViews>\r\n            {courtDiv}\r\n          </SwipeableViews>\r\n          <Legende />\r\n        </div>\r\n      )\r\n    } else {\r\n      const courtDiv = config.platzArray.map( (court) => {\r\n        return (<td key={court} id={\"platz\" + court} className=\"platz\">\r\n          <div>\r\n            <div className=\"platznummer\">\r\n              <span className=\"platzziffer rounded-circle\">{court}</span> \r\n              <Link to={{pathname: '/belegungsdetails/new', state: {c: court, d: this.state.day} }}><img  className=\"neuBtn p-1 rounded-circle\" src=\"images/add.png\" alt=\"Neue Belegung\" /></Link> \r\n            </div>\r\n            <div>            \r\n              <Platz court={court} day={this.state.day} permissions={this.props.permissions} />\r\n              </div>\r\n            </div>\r\n          </td>\r\n        )\r\n      })\r\n      return (\r\n        <div>\r\n          <DayPicker startswith={firstDaypickerDay} day={this.state.day} onClickHandler={this.setDay} />\r\n          <table className=\"table\">\r\n            <tbody>\r\n              <tr className=\"platzDim\">\r\n                <td className=\"zeitleisteCol\"><Zeitleiste /> </td>\r\n                {courtDiv}\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <Legende />\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst Zeitleiste = () => {\r\n  let zeit = [];\r\n  for (let s = config.dailyStartTime; s <= config.dailyEndTime; s++) {\r\n    for (let m = 0; m < 60; m=m+60) {\r\n      zeit.push (s.toString().padStart(2, '0') + ':' + m.toString().padStart(2, '0'));\r\n    }\r\n  } \r\n  return (\r\n    <div className=\"zeitleiste\">\r\n      {\r\n        zeit.map((e, index) => \r\n          <React.Fragment key={index}>\r\n            <div className=\"stunde\"><div className=\"stundetext\">{e}</div></div>\r\n            <div className=\"viertelstunde\"></div>\r\n            <div className=\"viertelstunde\"></div>\r\n            <div className=\"viertelstunde\"></div>\r\n          </React.Fragment>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Legende = () => {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row l-einzeldoppel p-0 pl-1 m-1\">Einzel/Doppel</div>\r\n      <div className=\"row l-turnier p-0 pl-1 m-1\">Turnier</div>\r\n      <div className=\"row l-veranstaltung p-0 pl-1 m-1\">Veranstaltung</div>\r\n      <div className=\"row l-punktspiele p-0 pl-1 m-1\">Punktspiele</div>\r\n      <div className=\"row l-training p-0 pl-1 m-1\">Training</div>\r\n      <div className=\"row l-einzeldoppel overbooked p- pl-10 m-1\">Reklamierbar</div>\r\n      <div className=\"row l-nichtreservierbar p-0 pl-1 m-1\">Frei verfügbar / Anderes</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Belegungstag;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","//\r\nimport React, { Component } from 'react';\r\nimport Config, { messages as Messages, permissions as Permissions } from './Defaults';\r\nimport { Redirect } from 'react-router';\r\nimport { spielerzusatz, nvb } from './functions';\r\nimport _ from 'lodash';\r\nimport Holidays from 'date-holidays';\r\n\r\n\r\nclass BelForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSave = this.handleSave.bind(this);\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n\r\n    const { r } = props;\r\n    // Daten für Datum, Start und Ende extrahieren\r\n    let [sd, st] = r.starts_at.split(' ');\r\n    const dateIsToday = ((new Date(sd)).getDate() === (new Date()).getDate());\r\n\r\n    // Initialer Wert für neue Buchungen. Wenn Einzel/Doppel erlaubt/nicht erlaubt sind, hier ändern\r\n    const bookingType = (r.booking_type === '') ? (dateIsToday ? 'ts-einzel' : 'ts-turnier') : r.booking_type;\r\n    // const bookingType = (r.booking_type === '') ? 'ts-turnier' : r.booking_type;\r\n    const deleteActive = r.booking_type.match(/(ts-training)|(ts-nichtreservierbar)/ig) \r\n        ? (Permissions.T_ALL_PERMISSIONS === (Permissions.T_ALL_PERMISSIONS & this.props.permissions)) \r\n        : true;\r\n\r\n    let [ed, et] = r.ends_at.split(' ');\r\n    let sdA = sd.split('-');\r\n    this.state = {\r\n      r: r,\r\n      spieltag: sdA[2] + '.' + sdA[1] + '.' + sdA[0],\r\n      startsAtDate: sd,\r\n      endsAtDate: ed,\r\n      startsAtStd: st.substring(0, 2),\r\n      startsAtViertel: st.substring(3, 5),\r\n      endsAtStd: et.substring(0, 2),\r\n      endsAtViertel: et.substring(3, 5),\r\n      bookingType: bookingType,\r\n      comment: (typeof r.comment === \"undefined\") ? \"\" : r.comment,\r\n      p1: r.p1id,\r\n      p2: r.p2id,\r\n      p3: r.p3id,\r\n      p4: r.p4id,\r\n      spieler: [],\r\n      court: r.court,\r\n      zurTafel: false,\r\n      saveActive: false,\r\n      deleteActive: deleteActive,\r\n      admin: false,\r\n      dateIsToday: dateIsToday,\r\n      overbooked: false,\r\n      jugend: false,\r\n      nichtVollBerechtigte: false,\r\n    };\r\n\r\n  }\r\n\r\n  componentWillMount() {\r\n    // Alle Spieler für die Select-Auswahl laden    \r\n    let url = Config.protokoll + Config.hostname + \"/intern/api/spieler.php\";\r\n    this.setState({ isLoading: true });\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          // console.log(result);\r\n          return result.json();\r\n        } else {\r\n          throw new Error('Fehler beim Laden der Spielerdaten');\r\n        }\r\n      })\r\n      .then(result => {\r\n        let spieler = result.records;\r\n        // console.log(spieler);\r\n        this.setState({ spieler: spieler })\r\n      })\r\n      .catch(error => this.setState({ error, isLoading: false }));\r\n  }\r\n\r\n  render() {\r\n    // console.log(\"startsAtStd:\" + this.state.startsAtStd);\r\n    if (this.state.zurTafel === true) {\r\n      return <Redirect to={'/' + this.state.startsAtDate} />\r\n    }\r\n    const vorstand = (Permissions.VORSTAND & this.props.permissions)\r\n    return (\r\n      <div>\r\n        <h1>Spieltag: {this.state.spieltag}</h1>\r\n        <form className=\"form-inline\">\r\n          <fieldset className=\"fields\">\r\n            <div><strong>Platz</strong></div>\r\n            <div className=\"form-group\">\r\n              <select id=\"court\" className=\"form-control\" onChange={this.handleChange} value={this.state.court}>\r\n                <option value=\"--\">--</option>\r\n                <option value=\"1\">1</option>\r\n                <option value=\"2\">2</option>\r\n                <option value=\"3\">3</option>\r\n                <option value=\"4\">4</option>\r\n                <option value=\"5\">5</option>\r\n                <option value=\"6\">6</option>\r\n              </select>\r\n            </div>\r\n            <div><strong>Start</strong> <span id=\"startsAtMsg\" className={this.state.startsAtMsgClass}>{this.state.startsAtMsgTxt}</span></div>\r\n            <div className=\"form-group\">\r\n              <select id=\"startsAtStd\" className={'form-control ' + this.state.startsAtMsgClass} onChange={this.handleChange} value={this.state.startsAtStd}>\r\n                <option value=\"--\">--</option>\r\n                <option value=\"08\">08</option>\r\n                <option value=\"09\">09</option>\r\n                <option value=\"10\">10</option>\r\n                <option value=\"11\">11</option>\r\n                <option value=\"12\">12</option>\r\n                <option value=\"13\">13</option>\r\n                <option value=\"14\">14</option>\r\n                <option value=\"15\">15</option>\r\n                <option value=\"16\">16</option>\r\n                <option value=\"17\">17</option>\r\n                <option value=\"18\">18</option>\r\n                <option value=\"19\">19</option>\r\n                <option value=\"20\">20</option>\r\n              </select>\r\n              <select id=\"startsAtViertel\" className={'form-control ' + this.state.startsAtMsgClass} onChange={this.handleChange} value={this.state.startsAtViertel}>\r\n                <option value=\"--\">--</option>\r\n                <option value=\"00\">00</option>\r\n                <option value=\"15\">15</option>\r\n                <option value=\"30\">30</option>\r\n                <option value=\"45\">45</option>\r\n              </select>\r\n            </div>\r\n            <div><strong>Ende</strong></div>\r\n            <div className=\"form-group\">\r\n              <select id=\"endsAtStd\" className={'form-control ' + this.state.endsAtMsgClass} onChange={this.handleChange} value={this.state.endsAtStd}>\r\n                <option value=\"--\">--</option>\r\n                <option value=\"08\">08</option>\r\n                <option value=\"09\">09</option>\r\n                <option value=\"10\">10</option>\r\n                <option value=\"11\">11</option>\r\n                <option value=\"12\">12</option>\r\n                <option value=\"13\">13</option>\r\n                <option value=\"14\">14</option>\r\n                <option value=\"15\">15</option>\r\n                <option value=\"16\">16</option>\r\n                <option value=\"17\">17</option>\r\n                <option value=\"18\">18</option>\r\n                <option value=\"19\">19</option>\r\n                <option value=\"20\">20</option>\r\n                <option value=\"21\">21</option>\r\n              </select>\r\n              <select id=\"endsAtViertel\" className={'form-control ' + this.state.endsAtMsgClass} onChange={this.handleChange} value={this.state.endsAtViertel}>\r\n                <option value=\"--\">--</option>\r\n                <option value=\"00\">00</option>\r\n                <option value=\"15\">15</option>\r\n                <option value=\"30\">30</option>\r\n                <option value=\"45\">45</option>\r\n              </select>\r\n            </div>\r\n            <br />\r\n            <div><strong>Buchungstyp</strong></div>\r\n            <select id=\"bookingType\" className=\"form-control\" onChange={this.handleChange} value={this.state.bookingType}>\r\n            <option disabled={false} value=\"ts-einzel\">Einzel</option>\r\n              <option disabled={false} value=\"ts-doppel\">Doppel</option>\r\n              {/* <option disabled={!this.state.dateIsToday} value=\"ts-einzel\">Einzel</option>\r\n              <option disabled={!this.state.dateIsToday} value=\"ts-doppel\">Doppel</option> */}\r\n              <option value=\"ts-turnier\">Turnier</option>\r\n              <option value=\"ts-veranstaltung\">Veranstaltung</option>\r\n              <option disabled={false} value=\"ts-training\">Training</option>\r\n              <option disabled={!vorstand} value=\"ts-punktspiele\">Punktspiele</option>\r\n              <option disabled={!vorstand} value=\"ts-nichtreservierbar\">Nicht reservierbar</option>\r\n            </select>\r\n            <br />\r\n            <div><strong>Spieler</strong> <span id=\"p1Msg\" className={this.state.p1MsgClass}>{this.state.p1MsgTxt}</span></div>\r\n            <div className=\"form-row\">\r\n              <select id=\"p1\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p1}>\r\n                <option value=\"none\">- Bitte auswählen -</option>\r\n                {this.state.spieler.map(r => {\r\n                  return (\r\n                    <option key={'p1' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum)}</option>\r\n                  )\r\n                })}\r\n              </select>\r\n              {(!(this.state.bookingType===\"ts-veranstaltung\")) ?\r\n                <select id=\"p2\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p2}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p2' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n            </div>\r\n            <div className=\"form-row\">\r\n              {(this.state.bookingType===\"ts-doppel\") ?\r\n                <select id=\"p3\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p3}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p3' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n              {(this.state.bookingType===\"ts-doppel\") ?\r\n                <select id=\"p4\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p4}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p4' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n            </div>\r\n\r\n            <div><strong>Bemerkung</strong> <span id=\"commentMsg\" className={this.state.commentMsgClass}>{this.state.commentMsgTxt}</span></div>\r\n            <div className=\"form-group\">\r\n              <input type=\"text\" id=\"comment\" className=\"form-control w-100\" onChange={this.handleChange} value={this.state.comment} placeholder=\"Spielergebnis, Gastname, ...\" />\r\n            </div>\r\n\r\n            <button type=\"submit\" onClick={e => { this.handleSave(e) }} className=\"btn btn-primary m-1\" disabled={!this.state.saveActive}>Speichern</button>\r\n            <button type=\"submit\" onClick={e => { this.handleDelete(e) }} className=\"btn btn-primary m-2\" disabled={!this.state.deleteActive}>Löschen</button>\r\n          </fieldset>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  handleSave(e) {\r\n    e.preventDefault();\r\n    // console.log(\"SAVE FORM DATA NOW!\");\r\n    const s = {}\r\n    // Meldungen zurücksetzen\r\n    s.startsAtMsgTxt = ''\r\n    s.startsAtMsgClass = ''\r\n    s.saveActive = true\r\n    s.p1MsgFormCtrl = ''\r\n\r\n    let parameters =\r\n      '?op=cu'\r\n      + '&rid=' + this.state.r.id\r\n      + '&ds=' + this.state.startsAtDate + ' ' + this.state.startsAtStd + ':' + this.state.startsAtViertel\r\n      + '&de=' + this.state.endsAtDate + ' ' + this.state.endsAtStd + ':' + this.state.endsAtViertel\r\n      + '&uid=' + this.props.userId\r\n      + '&p1=' + this.state.p1\r\n      + '&p2=' + this.state.p2\r\n      + '&p3=' + this.state.p3\r\n      + '&p4=' + this.state.p4\r\n      + '&c=' + this.state.court\r\n      + '&t=' + this.state.bookingType\r\n      + '&cmt=' + this.state.comment\r\n      + '&pr=0'\r\n      ;\r\n    let url = Config.protokoll + Config.hostname\r\n      + '/intern/api/platz.php'\r\n      + parameters;\r\n    // console.log(url);\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          // console.log(result.body);\r\n          return result.json();\r\n        } else {\r\n          throw new Error('Fehler beim Erzeugen/Updaten der Belegung' + this.state.r.id);\r\n        }\r\n      })\r\n      .then(result => {\r\n        let rc = result.records[0].returncode;\r\n        if (rc === 'ok') {\r\n          // Logging der Buchung\r\n          let logurl =\r\n            Config.protokoll\r\n            + Config.hostname\r\n            + Config.buchungenlog\r\n            + parameters;\r\n          fetch(logurl, { credentials: 'same-origin' }); // Wenn Logging fehlschlagen sollte, dann verzichten wir eben darauf\r\n          this.setState({ zurTafel: true })\r\n        } else {\r\n          // Fehlermeldung\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.platzbelegt;\r\n        }\r\n      })\r\n    // .catch(error => this.setState({ error, isLoading: false }));\r\n    // e.preventDefault();\r\n  }\r\n\r\n  handleDelete(e) {\r\n    // FEHLT: Prüfung: Wenn der Buchungsstart in der Vergangenheit liegt, wird nicht gelöscht, auf keinen Fall GAST-Buchungen\r\n    const sdStr = this.state.startsAtDate + 'T' + this.state.startsAtStd + ':' + this.state.startsAtViertel + \"Z\";\r\n    const sd = new Date(sdStr);\r\n    const jetzt = new Date();\r\n\r\n    e.preventDefault();\r\n    // console.log(\"DELETE ROW NOW!\" + this.state.r.id);\r\n\r\n    if (sd >= jetzt || (Permissions.VORSTAND & this.props.permissions)) {\r\n      let parameters =\r\n        '?op=d'\r\n        + '&rid=' + this.state.r.id\r\n        + '&uid=' + this.props.userId;\r\n      let url =\r\n        Config.protokoll\r\n        + Config.hostname\r\n        + Config.platzbuchungen\r\n        + parameters;\r\n      fetch(url, { credentials: 'same-origin' })\r\n        .then(result => {\r\n          if (result.ok) {\r\n            // Logging der Buchung\r\n            let logurl = Config.protokoll + Config.hostname\r\n              + Config.buchungenlog\r\n              + parameters;\r\n            fetch(logurl, { credentials: 'same-origin' });\r\n            this.setState({ zurTafel: true });\r\n          }\r\n        })\r\n    } else {\r\n      this.setState({ zurTafel: true });\r\n    }\r\n    e.preventDefault();\r\n\r\n  }\r\n\r\n  handleChange(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({ [e.target.id]: e.target.value }, () => {\r\n      const s = {}\r\n\r\n      // Meldungen zurücksetzen\r\n      s.p1MsgTxt = ''\r\n      s.p1MsgClass = ''\r\n      s.startsAtMsgTxt = ''\r\n      s.startsAtMsgClass = ''\r\n      s.commentMsgTxt = ''\r\n      s.commentMsgClass = ''\r\n      s.saveActive = true\r\n      s.overbooked = false\r\n      s.deleteActive = true\r\n      s.p1MsgFormCtrl = ''\r\n\r\n      // Bedingungen\r\n      let condEinGast = false\r\n      let condEinSpielerJug = false\r\n      let condEinSpielerErw = false\r\n      let condDoppelteSpieler = false\r\n      let condAbendZeit = false\r\n\r\n      const datestring = this.state.startsAtDate + 'T' + this.state.startsAtStd + ':' + this.state.startsAtViertel + \"Z\"\r\n      const sd = new Date(datestring)\r\n      const hd = new Holidays()\r\n      hd.init('DE', 'BY')\r\n      const condFeiertag = hd.isHoliday(sd) ? true : false\r\n      const condSonnOderFeiertag = (condFeiertag || (sd.getDay() === 0) || (sd.getDay() === 6))\r\n      const condPlatz6 = (this.state.court === 6)\r\n\r\n      // Validierung\r\n      // -----------\r\n      // Es wird validiert, ob Erwachsene, Schnuppermitglieder und Jugendliche \r\n      // wirklich spielberechtigt sind und ob die eingetragenen Zeiten stimmen\r\n\r\n      const start = Number(this.state.startsAtStd + this.state.startsAtViertel)\r\n      const ende = Number(this.state.endsAtStd + this.state.endsAtViertel)\r\n      const pKeys = [];\r\n\r\n      pKeys[0] = _.find(this.state.spieler, { 'id': this.state.p1 })\r\n      pKeys[1] = _.find(this.state.spieler, { 'id': this.state.p2 })\r\n      pKeys[2] = _.find(this.state.spieler, { 'id': this.state.p3 })\r\n      pKeys[3] = _.find(this.state.spieler, { 'id': this.state.p4 })\r\n\r\n      // Haben wir einen GAST?\r\n      const {p1, p2, p3, p4} = this.state;\r\n      [p1,p2,p3,p4].forEach( (p) => {\r\n        // console.log(`p: ${p} gastId: ${Config.gastId} ` + (p === Config.gastId))\r\n        if (Number(p) === Config.gastId) {\r\n          condEinGast = true\r\n        }\r\n      })\r\n\r\n      // Ist ein Jugendlicher dabei? Ist ein Erwachsener dabei?\r\n      // Welche Geburtsdaten haben die Spieler?\r\n      pKeys.map(k => {\r\n        if (k != null) // \r\n        {\r\n          if (!nvb(k['geburtsdatum'])) {\r\n            condEinSpielerErw = true\r\n          } else {\r\n            condEinSpielerJug = true\r\n          }\r\n          return k['geburtsdatum']\r\n        }\r\n        return undefined\r\n      })\r\n      condAbendZeit = (ende) > Config.eveningTime\r\n\r\n      // Message an der Spielzeit\r\n      // Formal müssen Spieler korrekt eingetragen sein\r\n      if (this.state.bookingType.match(/(ts-veranstaltung)|(ts-training)|(ts-nichtreservierbar)/ig)) { \r\n        // Ein Spieler muss eingetragen werden\r\n        if (Number(this.state.p1) === 0) {\r\n          [ s.p1msgClass, s.p1MsgClass, s.p1MsgTxt ] = Messages.spieleranzahl\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n        // Spieler 2 bis 4 werden \"gelöscht\"\r\n        s.p2 = s.p3 = s.p4 = 0\r\n      }\r\n      if (this.state.bookingType.match(/(ts-turnier)|(ts-einzel)/ig)) {\r\n        // Zwei Spieler müssen eingetragen werden\r\n        if ((this.state.p1 & this.state.p2) === 0) {\r\n          [ s.p1msgClass, s.saveActive, s.p1MsgTxt ] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        } else if (this.state.p1 === this.state.p2) {  \r\n          // Sind die Spieler doppelt?\r\n          condDoppelteSpieler = true;\r\n          [ s.p1msgClass, s.saveActive, s.p1MsgTxt ] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n        // Spieler 3 bis 4 werden \"gelöscht\"\r\n        s.p3 = s.p4 = 0\r\n      }\r\n      if (this.state.bookingType === \"ts-doppel\") {\r\n        // Vier Spieler\r\n        // Sind unter 4 Spielern welche doppelt?\r\n        condDoppelteSpieler = (_.uniq([this.state.p1, this.state.p2, this.state.p3, this.state.p4]).length < 4)\r\n        \r\n        if (!condEinGast) {\r\n          if (condDoppelteSpieler || (Number(this.state.p3) === 0 || Number(this.state.p4) === 0)) {\r\n            [ s.p1MsgClass, s.saveActive, s.p1MsgTxt ] = Messages.spieleranzahl;\r\n            s.p1MsgFormCtrl = 'is-invalid'\r\n          }\r\n        }\r\n      }\r\n      if (condEinGast) {\r\n        if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)/ig)) {\r\n          [ s.commentMsgClass, s.saveActive, s.commentMsgTxt ] = Messages.gast\r\n        }\r\n         else {\r\n          [ s.p1MsgClass, s.saveActive, s.p1MsgTxt ] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n      }\r\n      if (this.state.bookingType === \"ts-veranstaltung\") {\r\n          [ s.commentMsgClass, s.saveActive, s.commentMsgTxt ] = Messages.veranstaltung\r\n      }\r\n      \r\n      // Jetzt die Berechtigungen nach Alter, Status, Zeitpunkt, Message an der Spielzeit\r\n      if ((condPlatz6 && condEinSpielerErw && !condEinSpielerJug && condSonnOderFeiertag && condAbendZeit)\r\n        || (condPlatz6 && condEinSpielerErw && !condEinSpielerJug && condSonnOderFeiertag && !condAbendZeit)\r\n        || (condPlatz6 && condEinSpielerErw && !condEinSpielerJug && !condSonnOderFeiertag && condAbendZeit)) {\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.jugendvorrecht;\r\n          s.overbooked = true\r\n      }\r\n      else if ((!condPlatz6 && !condEinSpielerErw && condEinSpielerJug && condSonnOderFeiertag && condAbendZeit)\r\n        || (!condPlatz6 && !condEinSpielerErw && condEinSpielerJug && condSonnOderFeiertag && !condAbendZeit)\r\n        || (!condPlatz6 && !condEinSpielerErw && condEinSpielerJug && !condSonnOderFeiertag && condAbendZeit)) {\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.erwachsenenvorrecht;\r\n          s.overbooked = true\r\n      }\r\n\r\n      // Auswertung Spielzeit formal, Message an der Spielzeit\r\n      if (start >= ende) {\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.zeit;\r\n      }\r\n      else if (this.state.bookingType === \"ts-einzel\") {\r\n        if ((ende - start) > Config.singleTime) {\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.einzeldauer;\r\n        }\r\n      }\r\n      else if (this.state.bookingType === \"ts-doppel\") {\r\n        if ((ende - start) > Config.doubleTime) {\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.doppeldauer;\r\n        }\r\n      }\r\n      else if (this.state.bookingType === \"ts-turnier\") {\r\n        if ((ende - start) === Config.turnierTime) {\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.turnierspieldauer;\r\n        }\r\n      }\r\n\r\n      // Trainingszeiten und Nicht Reservierbar ist nur für Berechtigte\r\n      if (this.state.bookingType.match(/(ts-training)|(ts-nichtreservierbar)/ig)) {\r\n        s.deleteActive = (Permissions.T_ALL_PERMISSIONS === (Permissions.T_ALL_PERMISSIONS & this.props.permissions))\r\n        s.saveActive = (Permissions.T_ALL_PERMISSIONS === (Permissions.T_ALL_PERMISSIONS & this.props.permissions))\r\n      }\r\n\r\n      // Alle Ergebnisse in den State\r\n      this.setState(s)\r\n\r\n    });\r\n  }\r\n}\r\n\r\nexport default BelForm;\r\n","import React, { Component } from 'react';\r\nimport BelForm from './BelForm';\r\nimport { Link } from 'react-router-dom';\r\nimport Config from './Defaults';\r\n\r\nclass BelDetails extends Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      belegung : [],\r\n      isLoading : false,\r\n      error : false,\r\n    };\r\n  }  \r\n  componentWillMount() {\r\n    const op = this.props.match.params.op;\r\n    if (op === \"update\") {\r\n      const {i, d} = this.props.location.state;\r\n      this.updateBel(i, d);\r\n    } else if (op === \"new\") {\r\n      const {c, d} = this.props.location.state;\r\n      this.newBel(c, d);\r\n    }\r\n  }\r\n  \r\n  updateBel(id, day) {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/platz.php?op=r&rid=\" + id;\r\n    // console.log(url);\r\n  \r\n    this.setState({isLoading : true});\r\n    \r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then(result => {\r\n      if (result.ok) {\r\n        return result.json();\r\n      } else {\r\n        throw new Error('Fehler beim Laden der Platzbuchungsdetails');\r\n      }\r\n    })\r\n    .then(result => {\r\n      let belegung = result.records.map( r => {\r\n        return (\r\n          <div key={r.id} className=\"p-2\">\r\n              <Link to={'/' + day}><p className=\"btn btn-secondary\">Zurück</p></Link>\r\n              <BelForm r={r} userId={this.props.userId} permissions={this.props.permissions} />\r\n          </div>\r\n        )\r\n      })\r\n      this.setState({ belegung: belegung })\r\n    })\r\n    .catch(error => this.setState({ error, isLoading: false }));\r\n  }\r\n  \r\n  newBel(court, day)\r\n  {\r\n    let r = getEmptyBel(court, day);\r\n    let belegung = [\r\n        <div key={-1} className=\"p-2\">\r\n            <Link to={'/' + day}><p className=\"btn btn-secondary\">Zurück</p></Link>\r\n            <BelForm r={r} userId={this.props.userId} permissions={this.props.permissions} />\r\n        </div>\r\n    ];\r\n    this.setState({ belegung: belegung })\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <div>{this.state.belegung}</div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getEmptyBel(court, day) {\r\n  return {\r\n    id: 0,\r\n    user_id: 0,\r\n    p1: '',\r\n    p2: '',\r\n    p3: '',\r\n    p4: '',\r\n    court: court,\r\n    starts_at: day + ' 08:00:00',\r\n    ends_at: day + ' 09:00:00',\r\n    booking_type: '',\r\n    geburtsdatum: '0000-00-00',\r\n    p1id: 0,\r\n    p2id: 0,\r\n    p3id: 0,\r\n    p4id: 0,    \r\n  }\r\n}\r\nexport default BelDetails;\r\n  ","import React, { Component } from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport Belegungstag from './Belegungstag';\r\nimport BelDetails from './BelDetails';\r\n\r\n\r\nclass Routing extends Component {\r\n    render() {\r\n      return (\r\n        <Switch>\r\n          <Route exact path='/belegungsdetails/:op' render={(props) => <BelDetails {...props} userId={this.props.userId} permissions={this.props.permissions} />} />\r\n          {/* <Route exact path='/belegungsdetails/:op' component={BelDetails} /> */}\r\n          <Route path='/:day' render={(props) => <Belegungstag {...props} userId={this.props.userId} permissions={this.props.permissions} />} />\r\n          <Route render={(props) => <Belegungstag {...props} userId={this.props.userId} permissions={this.props.permissions} />} />\r\n        </Switch>\r\n      )\r\n    }\r\n}\r\n\r\n\r\nexport default Routing;\r\n  ","import React, { Component } from 'react';\r\nimport Routing from \"./Routing\";\r\nimport config from \"./Defaults\";\r\n\r\n\r\nclass App extends Component \r\n{\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      user: {},\r\n      isLoggedIn: false,\r\n      permissions: 0,\r\n      renderData: [],\r\n      isLoading1: false,\r\n      isLoading2: false,\r\n    };\r\n  }\r\n  \r\n  componentDidMount()\r\n  {\r\n    this.setState({ isLoading1: true , isLoading2: true});\r\n    \r\n    if (config.prod) \r\n    { \r\n      this.checkUser();\r\n      this.setPermission();\r\n    } \r\n    else \r\n    {\r\n      // In der Testumgebung simulierter User\r\n      this.setState({user: config.testuser, permissions: config.permissions});\r\n    }\r\n  }\r\n\r\n  checkUser() \r\n  {\r\n    const url = config.protokoll + config.hostname + \"/intern/api/checkuser.php?prod=\";\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then( (res) => {\r\n      if (res.ok) {\r\n        res.json()\r\n        .then( (user) => {\r\n          if (user.retcode === 'OK') {\r\n            this.setState({user: user, isLoading1: false});\r\n          } else {\r\n            window.location.href = config.protokoll + config.hostname + config.loginPage;\r\n          }\r\n        });\r\n      }\r\n    })\r\n  }\r\n  \r\n  setPermission() \r\n  {\r\n    const url = config.protokoll + config.hostname + \"/intern/api/checkpermission.php\";\r\n    // console.log(url)\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then( (res) => {\r\n      if (res.ok) {\r\n        res.json()\r\n        .then( (permissions) => {\r\n          // console.log(permitted.retcode)\r\n          this.setState({permissions: permissions.retcode, isLoading2: false})\r\n        })\r\n      }\r\n    })\r\n  }\r\n  \r\n  render() \r\n  {\r\n    const { isLoading1, isLoading2 } = this.state;\r\n    if (config.prod && (isLoading1 || isLoading2)) {\r\n      return <p>Loading...</p>\r\n    } else {\r\n      return (\r\n        <React.Fragment>\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col text-left\">\r\n                <img src=\"/images/tcoplain_0,1x.png\" alt=\"TCO -Logo\" />\r\n              </div>\r\n              <div className=\"col\">\r\n                <span className=\"h6 text-center ml-2\"><a href=\"/intern/tafel/\" id=\"appname\">Platzbuchung</a></span> \r\n                <span className=\"text-center ml-2\"><small> ({this.state.user.vorname + ' ' + this.state.user.nachname})</small></span>\r\n              </div>\r\n              <div className=\"col\">\r\n                <div className=\"small align-bottom\"><span className=\"pl-5\"><a href=\"/intern/logout.php\"><img src=\"/images/logout.png\" alt=\"Logout\" /></a></span></div> \r\n              </div>\r\n            </div>\r\n          </div>\r\n              \r\n          <Routing userId = {this.state.user.id} permissions = {this.state.permissions}/>\r\n          <footer className=\"blockquote-footer\">(c) 2019 by Conny Roloff. Dem TC Olching zur kostenlosen Nutzung zur Verfügung gestellt.</footer>\r\n        </React.Fragment>\r\n      )}\r\n    }\r\n  }\r\n\r\n\r\nexport default App;\r\n  ","import 'babel-polyfill'; \r\nimport 'react-app-polyfill/ie11';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport App from './components/App';\r\n\r\nReactDOM.render((\r\n  <Router>\r\n    <App />\r\n  </Router>\r\n), document.getElementById('root'));\r\n\r\n// import index from \"./js/index\";"],"sourceRoot":""}