{"version":3,"sources":["components/Defaults.js","components/functions.js","components/Platz.js","components/DayPicker.js","components/Belegungstag.js","components/BelForm.js","components/Belegung.js","components/Routing.js","components/App.js","index.js"],"names":["formatDate","d","month","getMonth","day","getDate","year","getFullYear","length","join","spielerzusatz","geburtsdatum","schnupper","aktuellesJahr","Date","geburtsjahr","zusatz","Number","replace","servertimeNow","servertime","parseCookie","document","cookie","str","split","map","v","reduce","acc","decodeURIComponent","trim","config","testuser","id","vorname","nachname","permissions","stringSeparator","smartphoneWidth","anzahlPlaetze","platzArray","daypickerMaxDays","daypickerDaysBeforeToday","daypickerDaysBeforeTodayWide","buchungenlog","platzbuchungen","dailyStartTime","dailyEndTime","eveningTime","maxMinutesDistance","singleTime","doubleTime","turnierTime","gastId","mitgliedId","IMPORTANT","messages","gast","mitglied","veranstaltung","spieleranzahl","jugendvorrecht","erwachsenenvorrecht","einzeldauer","doppeldauer","turnier","turnierspieldauer","zeit","platzbelegt","i","push","NONE","MYDATA_READ","MYDATA_WRITE","MYDATA_UPDATE","ALLDATA_READ","ALLDATA_WRITE","ALLDATA_UPDATE","PERMISSION_FREE_1","MANNSCHAFTSFUEHRER","WIRT","T_ALL_PERMISSIONS","PERMISSION_FREE_2","VORSTAND","PERMISSION_FREE_5","PERMISSION_FREE_6","PERMISSION_FREE_7","PERMISSION_FREE_8","PERMISSION_FREE_9","PERMISSION_FREE_10","PERMISSION_FREE_11","ADMINISTRATOR","Platz","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleWindowSizeChange","setState","zumBelegungstag","state","courtData","isLoading","error","width","window","innerWidth","prevProps","_this$props","court","fetchPlatz","_this$props2","uPermissions","_this2","userIsAllowed","url","Config","protokoll","hostname","addEventListener","fetch","credentials","then","result","ok","redirected","location","href","json","records","r","spieler","k","cn","computeBelClasses","starts_at","ends_at","booking_type","formatSpieler","platzWide","match","react_default","a","createElement","key","className","substring","comment","Link","to","pathname","c","op","removeEventListener","Component","p1vn","charAt","p1nn","p1geb","schnupper1","p2vn","p2nn","p2geb","schnupper2","p3vn","p3nn","p3geb","schnupper3","p4vn","p4nn","p4geb","schnupper4","s","RegExp","e","bookingType","dauer","bt","classNames","list","MenuItem","_ref","text","selected","concat","Arrow","_ref2","ArrowLeft","ArrowRight","DayPicker","onSelect","onClickHandler","startswith","end","setDate","start","dt","arr","name","toLocaleDateString","weekday","getDateArray","menu","el","DayPicker_MenuItem","build_default","data","arrowLeft","arrowRight","Belegungstag","dayDate","params","isNaN","setDay","bind","dString","firstDaypickerDay","courtDiv","Belegungstag_Zeitleiste","src","alt","components_Platz","components_DayPicker","react_swipeable_views_lib_default","Belegungstag_Legende","Zeitleiste","m","toString","padStart","index","Fragment","Legende","BelForm","handleChange","assertThisInitialized","handleSave","handleDelete","_r$starts_at$split","_r$starts_at$split2","slicedToArray","sd","st","scd","ssd","setHours","dateIsToday","valueOf","deleteActive","Permissions","_r$ends_at$split","_r$ends_at$split2","ed","et","sdA","spieltag","startsAtDate","endsAtDate","startsAtStd","startsAtViertel","endsAtStd","endsAtViertel","p1","p1id","p2","p2id","p3","p3id","p4","p4id","p1Schn","p2Schn","p3Schn","p4Schn","zurTafel","saveActive","admin","overbooked","jugend","nichtVollBerechtigte","Error","catch","_this3","Redirect","condMF","onChange","value","disabled","startsAtMsgClass","startsAtMsgTxt","endsAtMsgClass","p1MsgClass","p1MsgTxt","p1MsgFormCtrl","commentMsgClass","commentMsgTxt","type","placeholder","onClick","_this4","preventDefault","parameters","userId","rc","returncode","logurl","_Messages$platzbelegt","Messages","loginPage","_this5","sdStr","jetzt","_this6","defineProperty","target","condEinGast","condEinMitglied","condEinSpielerErwVoll","condDoppelteSpieler","datestring","hd","Holidays","init","condSonnOderFeiertag","isHoliday","getDay","ende","pKeys","_","find","_this6$state","forEach","p","_this6$state2","isJugendlicher","_Messages$spieleranza","p1msgClass","_Messages$spieleranza2","_Messages$spieleranza3","uniq","_Messages$spieleranza4","_Messages$spieleranza5","_Messages$veranstaltu","dToday","getHours","getMinutes","_Messages$erwachsenen","_Messages$zeit","_Messages$einzeldauer","_Messages$doppeldauer","_Messages$turnierspie","_Messages$turnier","Belegung","belegung","_this$props$location$","updateBel","_this$props$location$2","newBel","console","log","components_BelForm","user_id","getEmptyBel","Routing","Switch","Route","exact","path","render","components_Belegung","assign","components_Belegungstag","App","user","isLoggedIn","renderData","isLoading1","isLoading2","prod","checkUser","setPermission","res","retcode","_this$state","components_Routing","ReactDOM","BrowserRouter","components_App","getElementById"],"mappings":"2KA4DA,wIC5DaA,EAAa,SAACC,GAEzB,IAAIC,EAAQ,IAAMD,EAAEE,WAAa,GAC7BC,EAAM,GAAKH,EAAEI,UACbC,EAAOL,EAAEM,cAKb,OAHIL,EAAMM,OAAS,IAAGN,EAAQ,IAAMA,GAChCE,EAAII,OAAS,IAAGJ,EAAM,IAAMA,GAEzB,CAACE,EAAMJ,EAAOE,GAAKK,KAAK,MAoBpBC,EAAgB,SAACC,EAAcC,GAE1C,IAAIC,EAAgB,IAAIC,KACxBD,EAAgBA,EAAcN,cAC9B,IAAIQ,EAAc,IAAID,KAAKH,GAIvBK,EAAS,MAFGH,GADhBE,EAAcA,EAAYR,eACqB,GAEjB,MAAQ,KAA6B,IAAtBU,OAAOL,GAAmB,QAAU,IAAM,IAGvF,OADAI,GADAA,EAASA,EAAOE,QAAQ,KAAM,MACdA,QAAQ,KAAM,KAoBnBC,EAAgB,WAC3B,IACMC,EADUC,EAAYC,SAASC,QACX,WAE1B,OADW,IAAIT,KAAKG,OAAOG,KAKvBC,EAAc,SAAAG,GAAG,OACrBA,EACGC,MAAM,KACNC,IAAI,SAAAC,GAAC,OAAIA,EAAEF,MAAM,OACjBG,OAAO,SAACC,EAAKF,GAEZ,OADAE,EAAIC,mBAAmBH,EAAE,GAAGI,SAAWD,mBAAmBH,EAAE,GAAGI,QACxDF,GACN,KDrEDG,EAAS,CACbC,SAAU,CAACC,GAAG,IAAKC,QAAQ,OAAQC,SAAS,gBAAiBC,YAAa,OAG1EC,gBAAiB,IACjBC,gBAAiB,IACjBC,cAAe,EACfC,WAAY,GACZC,iBAAkB,IAClBC,yBAA0B,EAC1BC,6BAA8B,EAC9BC,aAAc,+BACdC,eAAgB,wBAEhBC,eAAgB,EAChBC,aAAc,GACdC,YAAa,KACbC,mBAAoB,GACpBC,WAAY,GACZC,WAAY,IACZC,YAAa,IACbC,OAAQ,EACRC,WAAY,GAGZvB,SAAkB,YAClBA,UAAmB,UACnBA,UAAmB,oBACnBA,MAAc,GAQVwB,EAAY,cAKLC,EAAW,CACtBC,KAAM,CAACF,GAJM,EAIa,4GAC1BG,SAAU,CAACH,GALE,EAKiB,iGAC9BI,cAAe,CAACJ,GALL,EAKsB,8FACjCK,cAAe,CAACL,GAPH,EAOsB,mCACnCM,eAAgB,CATN,aAEC,EAOiB,qEAC5BC,oBAAqB,CAACP,GATT,EAS4B,0HACzCQ,YAAa,CAACR,GAVD,EAUoB,iDACjCS,YAAa,CAACT,GAXD,EAWoB,kDACjCU,QAAS,CAbC,aAEC,EAWU,uPACrBC,kBAAmB,CAACX,GAbP,EAa0B,uPACvCY,KAAM,CAACZ,GAdM,EAca,yCAC1Ba,YAAc,CAACb,GAfF,EAeqB,4BAE3Bc,EAAI,EAAGA,GAAKtC,EAAOQ,cAAe8B,IACzCtC,EAAOS,WAAW8B,KAAKD,GAIlB,IAAMjC,EAAc,CAWvBmC,KAAO,EACPC,YAAc,EACdC,aAAe,EACfC,cAAgB,EAChBC,aAAe,EACfC,cAAgB,EAChBC,eAAiB,GACjBC,kBAAoB,GAClBC,mBAAqB,GACrBC,KAAO,GACPC,kBAAoB,IACtBC,kBAAoB,IACpBC,SAAW,IACXC,kBAAoB,IACpBC,kBAAoB,KACpBC,kBAAoB,KACpBC,kBAAoB,KACpBC,kBAAoB,KACpBC,mBAAqB,MACrBC,mBAAqB,MACnBC,cAAgB,OAGP5D,IE1FT6D,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KA2ERQ,uBAAyB,WAEvBP,EAAKQ,SAAS,CAAEC,iBAAiB,KA3EjCT,EAAKU,MAAQ,CACXC,UAAW,GACXC,WAAY,EACZC,OAAQ,EACRC,MAAOC,OAAOC,WACdP,iBAAiB,GARFT,kFAYAiB,GACjB,GAAId,KAAKJ,MAAM1F,MAAQ4G,EAAU5G,IAAK,KAAA6G,EACFf,KAAKJ,MAAhCoB,EAD6BD,EAC7BC,MAAO9G,EADsB6G,EACtB7G,IAAKiC,EADiB4E,EACjB5E,YACnB6D,KAAKiB,WAAWD,EAAO9G,EAAKiC,gDAIZ,IAAA+E,EACkBlB,KAAKJ,MAAjCoB,EADUE,EACVF,MAAO9G,EADGgH,EACHhH,IAAKiC,EADF+E,EACE/E,YACpB6D,KAAKiB,WAAWD,EAAO9G,EAAKiC,sCAGnB6E,EAAO9G,EAAKiH,GAAc,IAAAC,EAAApB,KAC7BqB,GAAkBlF,EAAY2C,mBAAqBqC,GAAgB,EACnEG,EAAMC,EAAOC,UAAYD,EAAOE,SAAW,iCAAmCT,EAAQ,OAAS9G,EAAM,OAASA,EACpH0G,OAAOc,iBAAiB,SAAU1B,KAAKI,wBAEvCJ,KAAKK,SAAS,CAACI,WAAY,IAC3BkB,MAAML,EAAK,CAACM,YAAa,gBACxBC,KAAK,SAAAC,GACJ,GAAIA,EAAOC,GAKT,OAJID,EAAOE,aAETpB,OAAOqB,SAASC,KAAOJ,EAAOR,KAEzBQ,EAAOK,OAGZf,EAAKf,SAAS,CAACI,WAAY,MAGhCoB,KAAM,SAAAC,GACL,IAAItB,EAAYsB,EAAOM,QAAQ5G,IAAM,SAAA6G,GACnC,IACIC,EADAC,EAAIF,EAAErG,GAENwG,EAAKC,EAAmBJ,EAAEK,UAAWL,EAAEM,QAASN,EAAEO,cAGtD,OAFAN,EAAUO,EAAcR,EAAGjB,EAAKxB,MAAMkD,YAEhCzB,GAAkBgB,EAAEO,aAAaG,MAAM,8EAGzCC,EAAAC,EAAAC,cAAA,OAAKC,IAAKZ,EAAGa,UAAWZ,GACtBQ,EAAAC,EAAAC,cAAA,cAASb,EAAEK,UAAUW,UAAU,GAAG,KADpC,IACmDf,EACjDU,EAAAC,EAAAC,cAAA,eAAOb,EAAEiB,QAAT,MAKFN,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAMJ,IAAKZ,EAAGa,UAAWZ,EAAIgB,GAAI,CAAEC,SAAU,yBAA0BlD,MAAO,CAACmD,EAAG1C,EAAO5C,EAAGiE,EAAErG,GAAIjC,EAAGG,EAAKyJ,GAAI,YAC5GX,EAAAC,EAAAC,cAAA,cAASb,EAAEK,UAAUW,UAAU,GAAG,KADpC,IACmDf,EACjDU,EAAAC,EAAAC,cAAA,eAAOb,EAAEiB,QAAT,QAKRlC,EAAKf,SAAS,CAACG,UAAWA,IAC1BY,EAAKf,SAAS,CAACI,WAAY,qDAK7BG,OAAOgD,oBAAoB,SAAU5D,KAAKI,yDAS1C,OAAOJ,KAAKO,MAAMC,iBAnFFqD,aAwFdhB,EAAgB,SAACR,EAAGS,GAExB,IAAIR,EAAU,GAgBd,OAbAA,EAAQ,IAAMD,EAAEyB,MAAQhB,EAAYT,EAAEyB,KAAOzB,EAAEyB,KAAKC,OAAO,GAAK,KAAO,IAAM1B,EAAE2B,KAAQ3B,EAAE2B,KAAQ3B,EAAE2B,KAAO,IAAMxJ,EAAc6H,EAAE4B,MAAO5B,EAAE6B,YACzI5B,EAAQ,IAAMD,EAAE8B,MAAQrB,EAAYT,EAAE8B,KAAO9B,EAAE8B,KAAKJ,OAAO,GAAK,KAAO,IAAM1B,EAAE+B,KAAQ/B,EAAE+B,KAAQ/B,EAAE+B,KAAO,IAAM5J,EAAc6H,EAAEgC,MAAOhC,EAAEiC,YACzIhC,EAAQ,IAAMD,EAAEkC,MAAQzB,EAAYT,EAAEkC,KAAOlC,EAAEkC,KAAKR,OAAO,GAAK,KAAO,IAAM1B,EAAEmC,KAAQnC,EAAEmC,KAAQnC,EAAEmC,KAAO,IAAMhK,EAAc6H,EAAEoC,MAAOpC,EAAEqC,YACzIpC,EAAQ,IAAMD,EAAEsC,MAAQ7B,EAAYT,EAAEsC,KAAOtC,EAAEsC,KAAKZ,OAAO,GAAK,KAAO,IAAM1B,EAAEuC,KAAQvC,EAAEuC,KAAQvC,EAAEuC,KAAO,IAAMpK,EAAc6H,EAAEwC,MAAOxC,EAAEyC,YAQzIxC,GAHAA,GAFAA,EAAUA,EAAQ9G,IAAK,SAAAuJ,GAAC,OAAIA,EAAE/J,QAAQ,IAAIgK,OAAO,aAAc,OAE7CzK,KAAK,OAGLS,QAAQ,IAAIgK,OAAO,YAAa,KAO9CvC,EAAoB,SAACsC,EAAGE,EAAGC,GAG/B,IAAMC,EAAoC,GAA3BpK,OAAOkK,EAAE5B,UAAU,GAAG,KAAUtI,OAAOkK,EAAE5B,UAAU,GAAG,MAAoC,GAA3BtI,OAAOgK,EAAE1B,UAAU,GAAG,KAAUtI,OAAOgK,EAAE1B,UAAU,GAAG,MAC9H+B,EAAKF,EAOX,OANSG,IACP,KAAOF,EACP,KACA,KAAOJ,EAAE1B,UAAU,GAAI,IAAIrI,QAAQ,IAAK,KACxCoK,IAKWzF,sBC/HX2F,EAAO,GAILC,EAAW,SAAAC,GAAwB,IAArBC,EAAqBD,EAArBC,KAAMC,EAAeF,EAAfE,SACxB,OACE1C,EAAAC,EAAAC,cAAA,OAAKE,UAAS,WAAAuC,OAAaD,EAAW,QAAU,KAC7CD,IAkBDG,EAAQ,SAAAC,GAAyB,IAAtBJ,EAAsBI,EAAtBJ,KAAsBI,EAAhBzC,UACrB,OACEJ,EAAAC,EAAAC,cAAA,OAEEE,UAAU,uBACVqC,IAIAK,EAAYF,EAAM,CAAEH,KAAM,IAAKrC,UAAW,eAC1C2C,EAAaH,EAAM,CAAEH,KAAM,IAAKrC,UAAW,eAsClC4C,6MAnCbzF,MAAQ,CACNmF,SAAU,KAWZO,SAAW,SAAA9C,GACTtD,EAAKQ,SAAS,CAAEqF,SAAUvC,GAAO,kBAAMtD,EAAKD,MAAMsG,eAAe/C,0FAT9C,IAAApC,EACOf,KAAKJ,MAAxBuG,EADYpF,EACZoF,WAAYjM,EADA6G,EACA7G,IACfkM,EAAM,IAAIxL,KAAKV,GACnBkM,EAAIC,QAAQD,EAAIjM,UAAYoH,EAAO/E,kBACnC8I,EFxCwB,SAACgB,EAAOF,GAIlC,IAFA,IAAIG,EAAK,IAAI3L,KAAK0L,GACdE,EAAM,GACHD,GAAMH,GACXI,EAAInI,KAAK,CAAEoI,KAAM3M,EAAWyM,GAAKd,KAAMc,EAAGG,mBAAmB,QAAQ,CAAEC,QAAS,QAAS3M,MAAO,QAASE,IAAK,cAC9GqM,EAAGF,QAAQE,EAAGpM,UAAY,GAE5B,OAAOqM,EEgCEI,CAAaT,EAAYC,GAChCpG,KAAKK,SAAS,CAACqF,SAAUxL,qCAMlB,IACCwL,EAAa1F,KAAKO,MAAlBmF,SAEFmB,EAAYvB,EA1Ca9J,IAAI,SAAAsL,GAAM,IACnCL,EAAeK,EAAfL,KAAMhB,EAASqB,EAATrB,KAEd,OACEzC,EAAAC,EAAAC,cAAC6D,EAAD,CACEtB,KAAMA,EACNtC,IAAKsD,MAsCP,OACEzD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAC8D,EAAA/D,EAAD,CACEgE,KAAMJ,EACNK,UAAWpB,EACXqB,WAAYpB,EACZL,SAAUA,EACVO,SAAUjG,KAAKiG,mBA5BDpC,wCCjClBuD,cAEJ,SAAAA,IAAc,IAAAvH,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAoH,IACZvH,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAsH,GAAAjH,KAAAH,QA0BFI,uBAAyB,WACvBP,EAAKQ,SAAS,CAAEM,MAAOC,OAAOC,cA1B9BhB,EAAKU,MAAQ,CACXI,MAAOC,OAAOC,WACd3G,IAAK,GACLmN,QAAS,IALCxH,oFASZe,OAAOc,iBAAiB,SAAU1B,KAAKI,wBACvC,IHCwBrG,EGDpBsN,EAAUrH,KAAKJ,MAAMmD,MAAMuE,OAAOpN,IAIpCmN,GHHsBtN,EGAL,IAAIa,KAAKyM,cHEVzM,OAAS2M,MAAMxN,GGCrB,IAAIa,KAAKyM,GAFT,IAAIzM,KAIhBoF,KAAKK,SAAS,CAAEgH,QAASA,EAASnN,IAAKJ,EAAWuN,KAElDrH,KAAKwH,OAASxH,KAAKwH,OAAOC,KAAKzH,qDAM/BY,OAAOgD,oBAAoB,SAAU5D,KAAKI,uDAOrCsH,GACL,IAAM3N,EAAI,IAAIa,KAAK8M,GACnB1H,KAAKK,SAAS,CAACgH,QAAStN,EAAGG,IAAKJ,EAAWC,sCAGpC,IAAAqH,EAAApB,KACCW,EAAUX,KAAKO,MAAfI,MACJgH,EAAoB,IAAI/M,KAE5B,GADkB+F,GAAS7E,EAAOO,gBACpB,CACZsL,EAAkBtB,QAAQsB,EAAkBxN,UAAY2B,EAAOW,0BAC/D,IAAMmL,EAAW9L,EAAOS,WAAWf,IAAK,SAACwF,GACvC,OACEgC,EAAAC,EAAAC,cAAA,OAAKC,IAAKnC,EAAOhF,GAAI,QAAUgF,GAC7BgC,EAAAC,EAAAC,cAAA,SAAOE,UAAU,SACfJ,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,YACZJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,iBAAgBJ,EAAAC,EAAAC,cAAC2E,EAAD,OAC9B7E,EAAAC,EAAAC,cAAA,MAAIE,UAAU,SACZJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,eAAepC,GAC/BgC,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAMC,GAAI,CAACC,SAAU,yBAA0BlD,MAAO,CAACmD,EAAG1C,EAAOjH,EAAGqH,EAAKb,MAAMrG,IAAKyJ,GAAI,SAAUX,EAAAC,EAAAC,cAAA,OAAME,UAAU,4BAA4B0E,IAAI,iBAAiBC,IAAI,oBAEzK/E,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC8E,EAAD,CAAOhH,MAAOA,EAAO9G,IAAKkH,EAAKb,MAAMrG,IAAKiC,YAAaiF,EAAKxB,MAAMzD,YAAa2G,WAAW,YAS1G,OACEE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC+E,EAAD,CAAW9B,WAAYwB,EAAmBzN,IAAK8F,KAAKO,MAAMrG,IAAKgM,eAAgBlG,KAAKwH,SACpFxE,EAAAC,EAAAC,cAACgF,EAAAjF,EAAD,KACG2E,GAEH5E,EAAAC,EAAAC,cAACiF,EAAD,OAIJR,EAAkBtB,QAAQsB,EAAkBxN,UAAY2B,EAAOY,8BAC/D,IAAMkL,EAAW9L,EAAOS,WAAWf,IAAK,SAACwF,GACvC,OAAQgC,EAAAC,EAAAC,cAAA,MAAIC,IAAKnC,EAAOhF,GAAI,QAAUgF,EAAOoC,UAAU,SACrDJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,8BAA8BpC,GAC9CgC,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAMC,GAAI,CAACC,SAAU,yBAA0BlD,MAAO,CAACmD,EAAG1C,EAAOjH,EAAGqH,EAAKb,MAAMrG,IAAKyJ,GAAI,SAAUX,EAAAC,EAAAC,cAAA,OAAME,UAAU,4BAA4B0E,IAAI,iBAAiBC,IAAI,oBAEzK/E,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC8E,EAAD,CAAOhH,MAAOA,EAAO9G,IAAKkH,EAAKb,MAAMrG,IAAKiC,YAAaiF,EAAKxB,MAAMzD,YAAa2G,WAAW,SAMlG,OACEE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC+E,EAAD,CAAW9B,WAAYwB,EAAmBzN,IAAK8F,KAAKO,MAAMrG,IAAKgM,eAAgBlG,KAAKwH,SACpFxE,EAAAC,EAAAC,cAAA,SAAOE,UAAU,SACfJ,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,YACZJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,iBAAgBJ,EAAAC,EAAAC,cAAC2E,EAAD,MAA9B,KACCD,KAIP5E,EAAAC,EAAAC,cAACiF,EAAD,cAtGiBtE,aA6GrBuE,EAAa,WAEjB,IADA,IAAIlK,EAAO,GACF6G,EAAIjJ,EAAOe,eAAgBkI,GAAKjJ,EAAOgB,aAAciI,IAC5D,IAAK,IAAIsD,EAAI,EAAGA,EAAI,GAAIA,GAAI,GAC1BnK,EAAKG,KAAM0G,EAAEuD,WAAWC,SAAS,EAAG,KAAO,IAAMF,EAAEC,WAAWC,SAAS,EAAG,MAG9E,OACEvF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cAEXlF,EAAK1C,IAAI,SAACyJ,EAAGuD,GAAJ,OACPxF,EAAAC,EAAAC,cAACF,EAAAC,EAAMwF,SAAP,CAAgBtF,IAAKqF,GACnBxF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UAASJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cAAc6B,IACrDjC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBAQrBsF,EAAU,WACd,OACE1F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,aACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mCAAf,iBACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,8BAAf,WACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oCAAf,iBACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kCAAf,eACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,+BAAf,cAMSgE,yEC8WAuB,eAhgBb,SAAAA,EAAY/I,GAAO,IAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2I,IACjB9I,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA6I,GAAAxI,KAAAH,KAAMJ,KACDgJ,aAAe/I,EAAK+I,aAAanB,KAAlB3H,OAAA+I,EAAA,EAAA/I,QAAA+I,EAAA,EAAA/I,CAAAD,KACpBA,EAAKiJ,WAAajJ,EAAKiJ,WAAWrB,KAAhB3H,OAAA+I,EAAA,EAAA/I,QAAA+I,EAAA,EAAA/I,CAAAD,KAClBA,EAAKkJ,aAAelJ,EAAKkJ,aAAatB,KAAlB3H,OAAA+I,EAAA,EAAA/I,QAAA+I,EAAA,EAAA/I,CAAAD,KAJH,IAMTwC,EAAMzC,EAANyC,EANS2G,EAQF3G,EAAEK,UAAUnH,MAAM,KARhB0N,EAAAnJ,OAAAoJ,EAAA,EAAApJ,CAAAkJ,EAAA,GAQZG,EARYF,EAAA,GAQRG,EARQH,EAAA,GASbI,EAAM,IAAIzO,KAAKuO,GACfG,EAAMrO,IACVoO,EAAIE,SAAS,EAAE,EAAE,EAAE,GACnBD,EAAIC,SAAS,EAAE,EAAE,EAAE,GAEnB,IAAMC,EAAeH,EAAII,YAAcH,EAAIG,UAGrCvE,EAAkC,KAAnB7C,EAAEO,aAAwB4G,EAAc,YAAc,aAAgBnH,EAAEO,aACvF8G,GAAerH,EAAEO,aAAaG,MAAM,6BACnC4G,EAAY3K,qBAAuB2K,EAAY3K,kBAAoBa,EAAKD,MAAMzD,aAnBpEyN,EAsBFvH,EAAEM,QAAQpH,MAAM,KAtBdsO,EAAA/J,OAAAoJ,EAAA,EAAApJ,CAAA8J,EAAA,GAsBZE,EAtBYD,EAAA,GAsBRE,EAtBQF,EAAA,GAuBbG,EAAMb,EAAG5N,MAAM,KAvBF,OAwBjBsE,EAAKU,MAAQ,CACX8B,EAAGA,EACH4H,SAAUD,EAAI,GAAK,IAAMA,EAAI,GAAK,IAAMA,EAAI,GAC5CE,aAAcf,EACdgB,WAAYL,EACZM,YAAahB,EAAG/F,UAAU,EAAG,GAC7BgH,gBAAiBjB,EAAG/F,UAAU,EAAG,GACjCiH,UAAWP,EAAG1G,UAAU,EAAG,GAC3BkH,cAAeR,EAAG1G,UAAU,EAAG,GAC/B6B,YAAaA,EACb5B,QAA+B,qBAAdjB,EAAEiB,QAA2B,GAAKjB,EAAEiB,QACrDkH,GAAInI,EAAEoI,KACNC,GAAIrI,EAAEsI,KACNC,GAAIvI,EAAEwI,KACNC,GAAIzI,EAAE0I,KACNC,OAAQ3I,EAAE6B,WACV+G,OAAQ5I,EAAEiC,WACV4G,OAAQ7I,EAAEqC,WACVyG,OAAQ9I,EAAEyC,WACVxC,QAAS,GACTtB,MAAOqB,EAAErB,MACToK,UAAU,EACVC,YAAY,EACZ3B,aAAcA,EACd4B,OAAO,EACP9B,YAAaA,EACb+B,YAAY,EACZC,QAAQ,EACRC,sBAAsB,GApDP5L,oFAyDE,IAAAuB,EAAApB,KAEfsB,EAAMC,EAAOC,UAAYD,EAAOE,SAAW,0BAC/CzB,KAAKK,SAAS,CAAEI,WAAW,IAC3BkB,MAAML,EAAK,CAAEM,YAAa,gBACvBC,KAAK,SAAAC,GACJ,GAAIA,EAAOC,GAET,OAAOD,EAAOK,OAEd,MAAM,IAAIuJ,MAAM,wCAGnB7J,KAAK,SAAAC,GACJ,IAAIQ,EAAUR,EAAOM,QAErBhB,EAAKf,SAAS,CAAEiC,QAASA,MAE1BqJ,MAAM,SAAAjL,GAAK,OAAIU,EAAKf,SAAS,CAAEK,QAAOD,WAAW,uCAI7C,IAAAmL,EAAA5L,KAEP,IAA4B,IAAxBA,KAAKO,MAAM6K,SACb,OAAOpI,EAAAC,EAAAC,cAAC2I,EAAA,EAAD,CAAUrI,GAAI,CAACC,SAAU,iBAAkBlD,MAAOP,KAAKO,MAAM2J,gBAEtE,IAAM4B,EAAUnC,EAAY7K,sBAAwB6K,EAAY7K,mBAAqBkB,KAAKJ,MAAMzD,aAChG,OACE6G,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,uBAAelD,KAAKO,MAAM0J,UAC1BjH,EAAAC,EAAAC,cAAA,QAAME,UAAU,eACdJ,EAAAC,EAAAC,cAAA,YAAUE,UAAU,UAClBJ,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,wBACLF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACbJ,EAAAC,EAAAC,cAAA,UAAQlH,GAAG,QAAQoH,UAAU,eAAe2I,SAAU/L,KAAK4I,aAAcoD,MAAOhM,KAAKO,MAAMS,OACzFgC,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,KAAd,KACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,KAAd,KACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,KAAd,KACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,KAAd,KACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,KAAd,KACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,KAAd,OAGJhJ,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,+BACFlD,KAAKO,MAAMiJ,aACZxG,EAAAC,EAAAC,cAAA,mEAEFF,EAAAC,EAAAC,cAAA,UAAQlH,GAAG,cAAcoH,UAAU,eAAe2I,SAAU/L,KAAK4I,aAAcoD,MAAOhM,KAAKO,MAAM2E,aAC/FlC,EAAAC,EAAAC,cAAA,UAAQ+I,UAAWjM,KAAKO,MAAMiJ,YAAawC,MAAM,aAAjD,UACAhJ,EAAAC,EAAAC,cAAA,UAAQ+I,UAAWjM,KAAKO,MAAMiJ,YAAawC,MAAM,aAAjD,UACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,cAAd,WACAhJ,EAAAC,EAAAC,cAAA,UAAQ+I,UAAWH,EAAQE,MAAM,oBAAjC,iBACAhJ,EAAAC,EAAAC,cAAA,UAAQ+I,UAAWH,EAAQE,MAAM,eAAjC,YACAhJ,EAAAC,EAAAC,cAAA,UAAQ+I,UAAWH,EAAQE,MAAM,kBAAjC,gBAEFhJ,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,uBAAL,IAA4BF,EAAAC,EAAAC,cAAA,QAAMlH,GAAG,cAAcoH,UAAWpD,KAAKO,MAAM2L,kBAAmBlM,KAAKO,MAAM4L,iBACvGnJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACbJ,EAAAC,EAAAC,cAAA,UAAQlH,GAAG,cAAcoH,UAAW,gBAAkBpD,KAAKO,MAAM2L,iBAAkBH,SAAU/L,KAAK4I,aAAcoD,MAAOhM,KAAKO,MAAM6J,aAChIpH,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,OAEFhJ,EAAAC,EAAAC,cAAA,UAAQlH,GAAG,kBAAkBoH,UAAW,gBAAkBpD,KAAKO,MAAM2L,iBAAkBH,SAAU/L,KAAK4I,aAAcoD,MAAOhM,KAAKO,MAAM8J,iBACpIrH,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,QAGJhJ,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,uBACLF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACbJ,EAAAC,EAAAC,cAAA,UAAQlH,GAAG,YAAYoH,UAAW,gBAAkBpD,KAAKO,MAAM6L,eAAgBL,SAAU/L,KAAK4I,aAAcoD,MAAOhM,KAAKO,MAAM+J,WAC5HtH,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,OAEFhJ,EAAAC,EAAAC,cAAA,UAAQlH,GAAG,gBAAgBoH,UAAW,gBAAkBpD,KAAKO,MAAM6L,eAAgBL,SAAU/L,KAAK4I,aAAcoD,MAAOhM,KAAKO,MAAMgK,eAChIvH,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,MACAhJ,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,MAAd,QAGJhJ,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,yBAAL,IAA8BF,EAAAC,EAAAC,cAAA,QAAMlH,GAAG,QAAQoH,UAAWpD,KAAKO,MAAM8L,YAAarM,KAAKO,MAAM+L,WAC7FtJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,YACbJ,EAAAC,EAAAC,cAAA,UAAQlH,GAAG,KAAKoH,UAAW,gBAAkBpD,KAAKO,MAAMgM,cAAeR,SAAU/L,KAAK4I,aAAcoD,MAAOhM,KAAKO,MAAMiK,IACpHxH,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,KAAd,0BACChM,KAAKO,MAAM+B,QAAQ9G,IAAI,SAAA6G,GACtB,OACEW,EAAAC,EAAAC,cAAA,UAAQC,IAAK,KAAOd,EAAErG,GAAIgQ,MAAO3J,EAAErG,IAAKqG,EAAEC,QAAU9H,EAAc6H,EAAE5H,aAAc4H,EAAE3H,eAIxFsF,KAAKO,MAAM2E,YAAYnC,MAAM,0CAC7BC,EAAAC,EAAAC,cAAA,UAAQlH,GAAG,KAAKoH,UAAW,gBAAkBpD,KAAKO,MAAMgM,cAAeR,SAAU/L,KAAK4I,aAAcoD,MAAOhM,KAAKO,MAAMmK,IACpH1H,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,KAAd,0BACChM,KAAKO,MAAM+B,QAAQ9G,IAAI,SAAA6G,GACtB,OACEW,EAAAC,EAAAC,cAAA,UAAQC,IAAK,KAAOd,EAAErG,GAAIgQ,MAAO3J,EAAErG,IAAKqG,EAAEC,QAAU9H,EAAc6H,EAAE5H,aAAc4H,EAAE3H,eAIxF,IAGNsI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,YACc,cAAzBpD,KAAKO,MAAM2E,YACXlC,EAAAC,EAAAC,cAAA,UAAQlH,GAAG,KAAKoH,UAAW,gBAAkBpD,KAAKO,MAAMgM,cAAeR,SAAU/L,KAAK4I,aAAcoD,MAAOhM,KAAKO,MAAMqK,IACpH5H,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,KAAd,0BACChM,KAAKO,MAAM+B,QAAQ9G,IAAI,SAAA6G,GACtB,OACEW,EAAAC,EAAAC,cAAA,UAAQC,IAAK,KAAOd,EAAErG,GAAIgQ,MAAO3J,EAAErG,IAAKqG,EAAEC,QAAU9H,EAAc6H,EAAE5H,aAAc4H,EAAE3H,eAIxF,GAEuB,cAAzBsF,KAAKO,MAAM2E,YACXlC,EAAAC,EAAAC,cAAA,UAAQlH,GAAG,KAAKoH,UAAW,gBAAkBpD,KAAKO,MAAMgM,cAAeR,SAAU/L,KAAK4I,aAAcoD,MAAOhM,KAAKO,MAAMuK,IACpH9H,EAAAC,EAAAC,cAAA,UAAQ8I,MAAM,KAAd,0BACChM,KAAKO,MAAM+B,QAAQ9G,IAAI,SAAA6G,GACtB,OACEW,EAAAC,EAAAC,cAAA,UAAQC,IAAK,KAAOd,EAAErG,GAAIgQ,MAAO3J,EAAErG,IAAKqG,EAAEC,QAAU9H,EAAc6H,EAAE5H,aAAc4H,EAAE3H,eAIxF,IAINsI,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,2BAAL,IAAgCF,EAAAC,EAAAC,cAAA,QAAMlH,GAAG,aAAaoH,UAAWpD,KAAKO,MAAMiM,iBAAkBxM,KAAKO,MAAMkM,gBACzGzJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACbJ,EAAAC,EAAAC,cAAA,SAAOwJ,KAAK,OAAO1Q,GAAG,UAAUoH,UAAW,sBAAwBpD,KAAKO,MAAMgM,cAAeR,SAAU/L,KAAK4I,aAAcoD,MAAOhM,KAAKO,MAAM+C,QAASqJ,YAAY,kCAGnK3J,EAAAC,EAAAC,cAAA,UAAQwJ,KAAK,SAASE,QAAS,SAAA3H,GAAO2G,EAAK9C,WAAW7D,IAAM7B,UAAU,sBAAsB6I,UAAWjM,KAAKO,MAAM8K,YAAlH,aACArI,EAAAC,EAAAC,cAAA,UAAQwJ,KAAK,SAASE,QAAS,SAAA3H,GAAO2G,EAAK7C,aAAa9D,IAAM7B,UAAU,sBAAsB6I,UAAWjM,KAAKO,MAAMmJ,cAApH,oDAOCzE,GAAG,IAAA4H,EAAA7M,KACZiF,EAAE6H,iBAEF,IAAM/H,EAAI,CAEVA,eAAmB,GACnBA,iBAAqB,GACrBA,YAAe,EACfA,cAAkB,IAEdgI,EACF,cACY/M,KAAKO,MAAM8B,EAAErG,GACvB,OAASgE,KAAKO,MAAM2J,aAAe,IAAMlK,KAAKO,MAAM6J,YAAc,IAAMpK,KAAKO,MAAM8J,gBACnF,OAASrK,KAAKO,MAAM4J,WAAa,IAAMnK,KAAKO,MAAM+J,UAAY,IAAMtK,KAAKO,MAAMgK,cAC/E,QAAUvK,KAAKJ,MAAMoN,OACrB,OAAShN,KAAKO,MAAMiK,GACpB,OAASxK,KAAKO,MAAMmK,GACpB,OAAS1K,KAAKO,MAAMqK,GACpB,OAAS5K,KAAKO,MAAMuK,GACpB,MAAQ9K,KAAKO,MAAMS,MACnB,MAAQhB,KAAKO,MAAM2E,YACnB,QAAUlF,KAAKO,MAAM+C,QACrB,QAEAhC,EAAMC,EAAOC,UAAYD,EAAOE,SAChC,wBACAsL,EAEJpL,MAAML,EAAK,CAAEM,YAAa,gBACvBC,KAAK,SAAAC,GACJ,GAAIA,EAAOC,GACT,OAAOD,EAAOK,OAEd,MAAM,IAAIuJ,MAAM,4CAA8CmB,EAAKtM,MAAM8B,EAAErG,MAG9E6F,KAAK,SAAAC,GACJ,IAAImL,EAAKnL,EAAOM,QAAQ,GAAG8K,WAC3B,GAAW,OAAPD,EAAa,CAEf,IAAIE,EACF5L,EAAOC,UACLD,EAAOE,SACPF,EAAO5E,aACPoQ,EACJpL,MAAMwL,EAAQ,CAAEvL,YAAa,gBAC7BiL,EAAKxM,SAAS,CAAE+K,UAAU,SACrB,GAAW,mBAAP6B,EAAyB,KAAAG,EAAAtN,OAAAoJ,EAAA,EAAApJ,CAEuBuN,EAASlP,YAFhC,GAEhC4G,EAAEmH,iBAF8BkB,EAAA,GAEZrI,EAAEsG,WAFU+B,EAAA,GAEErI,EAAEoH,eAFJiB,EAAA,QAKlCxM,OAAOqB,SAASC,KAAOX,EAAO+L,UAGhCT,EAAKxM,SAAS0E,0CAIPE,GAAG,IAAAsI,EAAAvN,KACRwN,EAAQxN,KAAKO,MAAM2J,aAAe,IAAMlK,KAAKO,MAAM6J,YAAc,IAAMpK,KAAKO,MAAM8J,gBAAkB,IACpGlB,EAAK,IAAIvO,KAAK4S,GACdC,EAAQ,IAAI7S,KAIlB,GAFAqK,EAAE6H,iBAEE3D,GAAMsE,GAAU9D,EAAYzK,SAAWc,KAAKJ,MAAMzD,YAAc,CAClE,IAAI4Q,EACF,aACY/M,KAAKO,MAAM8B,EAAErG,GACvB,QAAUgE,KAAKJ,MAAMoN,OACrB1L,EACFC,EAAOC,UACLD,EAAOE,SACPF,EAAO3E,eACPmQ,EACJpL,MAAML,EAAK,CAAEM,YAAa,gBACvBC,KAAK,SAAAC,GACJ,GAAIA,EAAOC,GAAI,CAEb,IAAIoL,EAAS5L,EAAOC,UAAYD,EAAOE,SACnCF,EAAO5E,aACPoQ,EACJpL,MAAMwL,EAAQ,CAAEvL,YAAa,gBAC7B2L,EAAKlN,SAAS,CAAE+K,UAAU,YAIhCpL,KAAKK,SAAS,CAAE+K,UAAU,IAE5BnG,EAAE6H,sDAIS7H,GAAG,IAAAyI,EAAA1N,KACdiF,EAAE6H,iBAEF9M,KAAKK,SAALP,OAAA6N,EAAA,EAAA7N,CAAA,GAAiBmF,EAAE2I,OAAO5R,GAAKiJ,EAAE2I,OAAO5B,OAAS,WAC/C,IAAMjH,EAAI,CAGVA,SAAa,GACbA,WAAe,GACfA,eAAmB,GACnBA,iBAAqB,GACrBA,cAAkB,GAClBA,gBAAoB,GACpBA,YAAe,EACfA,cAAiB,EACjBA,cAAkB,GAClBA,YAAe,GAGX8I,GAAc,EACdC,GAAkB,EAElBC,GAAwB,EACxBC,GAAsB,EAIpBC,EAAaP,EAAKnN,MAAM2J,aAAe,IAAMwD,EAAKnN,MAAM6J,YAAc,IAAMsD,EAAKnN,MAAM8J,gBAAkB,IACzGlB,EAAK,IAAIvO,KAAKqT,GACdC,EAAK,IAAIC,IACfD,EAAGE,KAAK,KAAM,MACd,IACMC,IADeH,EAAGI,UAAUnF,IAC6B,IAAhBA,EAAGoF,UAAoC,IAAhBpF,EAAGoF,SAQnEjI,EAAyC,GAAjCvL,OAAO2S,EAAKnN,MAAM6J,aAAoBrP,OAAO2S,EAAKnN,MAAM8J,iBAChEmE,EAAsC,GAA/BzT,OAAO2S,EAAKnN,MAAM+J,WAAkBvP,OAAO2S,EAAKnN,MAAMgK,eAC7DkE,EAAQ,GAEdA,EAAM,GAAKC,IAAEC,KAAKjB,EAAKnN,MAAM+B,QAAS,CAAEtG,GAAM0R,EAAKnN,MAAMiK,KACzDiE,EAAM,GAAKC,IAAEC,KAAKjB,EAAKnN,MAAM+B,QAAS,CAAEtG,GAAM0R,EAAKnN,MAAMmK,KACzD+D,EAAM,GAAKC,IAAEC,KAAKjB,EAAKnN,MAAM+B,QAAS,CAAEtG,GAAM0R,EAAKnN,MAAMqK,KACzD6D,EAAM,GAAKC,IAAEC,KAAKjB,EAAKnN,MAAM+B,QAAS,CAAEtG,GAAM0R,EAAKnN,MAAMuK,KA5CJ,IAAA8D,EA+C5BlB,EAAKnN,MAC9B,CAhDqDqO,EA+C9CpE,GA/C8CoE,EA+C1ClE,GA/C0CkE,EA+CtChE,GA/CsCgE,EA+ClC9D,IACL+D,QAAS,SAACC,GAClB/T,OAAO+T,KAAOvN,EAAOnE,SACvByQ,GAAc,GAEZ9S,OAAO+T,KAAOvN,EAAOlE,aACvByQ,GAAkB,KArD+B,IAAAiB,EA0DZrB,EAAKnN,MA0B9C,GAzBA,CA3DqDwO,EA0D9C/D,OA1D8C+D,EA0DtC9D,OA1DsC8D,EA0D9B7D,OA1D8B6D,EA0DtB5D,QACD0D,QAAS,SAACC,GAC7B,MAALA,GACwC,IAAd/T,OAAO+T,KAMvCL,EAAMjT,IAAI,SAAA+G,GACR,GAAS,MAALA,EAOF,MALkE,OJrWhD,SAAC9H,GAC3B,GAA6B,qBAAlBA,GAAkD,OAAjBA,EAE1C,OAAO,EAET,IAAIE,EAAgB,IAAIC,KACxBD,EAAgBA,EAAcN,cAC9B,IAAIQ,EAAc,IAAID,KAAKH,GAI3B,OAFiBE,GADjBE,EAAcA,EAAYR,eACsB,GI4V/B2U,CAAezM,EAAC,eAAqBA,EAAC,WAC7CwL,GAAwB,GAEJ,EAEfxL,EAAC,eAKKiM,EAAQjN,EAAOxE,YAI5B2Q,EAAKnN,MAAM2E,YAAYnC,MAAM,6DAA8D,CAE7F,GAA8B,IAA1BhI,OAAO2S,EAAKnN,MAAMiK,IAAW,KAAAyE,EAAAnP,OAAAoJ,EAAA,EAAApJ,CACcuN,EAAS1P,cADvB,GAC7BoH,EAAEmK,WAD2BD,EAAA,GACflK,EAAEsH,WADa4C,EAAA,GACDlK,EAAEuH,SADD2C,EAAA,GAE/BlK,EAAEwH,cAAgB,aAGpBxH,EAAE2F,GAAK3F,EAAE6F,GAAK7F,EAAE+F,GAAK,EAEvB,GAAI4C,EAAKnN,MAAM2E,YAAYnC,MAAM,8BAA+B,CAE9D,GAA8B,IAA1BhI,OAAO2S,EAAKnN,MAAMiK,KAAuC,IAA1BzP,OAAO2S,EAAKnN,MAAMmK,IAAW,KAAAyE,EAAArP,OAAAoJ,EAAA,EAAApJ,CACjBuN,EAAS1P,cADQ,GAC5DoH,EAAEmK,WAD0DC,EAAA,GAC9CpK,EAAEsG,WAD4C8D,EAAA,GAChCpK,EAAEuH,SAD8B6C,EAAA,GAE9DpK,EAAEwH,cAAgB,kBACb,GAAImB,EAAKnN,MAAMiK,KAAOkD,EAAKnN,MAAMmK,GAAI,CAE1CsD,GAAsB,EAFoB,IAAAoB,EAAAtP,OAAAoJ,EAAA,EAAApJ,CAGGuN,EAAS1P,cAHZ,GAGxCoH,EAAEmK,WAHsCE,EAAA,GAG1BrK,EAAEsG,WAHwB+D,EAAA,GAGZrK,EAAEuH,SAHU8C,EAAA,GAI1CrK,EAAEwH,cAAgB,aAGpBxH,EAAE6F,GAAK7F,EAAE+F,GAAK,EAEhB,GAA+B,cAA3B4C,EAAKnN,MAAM2E,cAGb8I,EAAuBU,IAAEW,KAAK,CAAC3B,EAAKnN,MAAMiK,GAAIkD,EAAKnN,MAAMmK,GAAIgD,EAAKnN,MAAMqK,GAAI8C,EAAKnN,MAAMuK,KAAKxQ,OAAS,GAEhGuT,IACCG,GAAkD,IAA1BjT,OAAO2S,EAAKnN,MAAMqK,KAAuC,IAA1B7P,OAAO2S,EAAKnN,MAAMuK,MAAY,KAAAwE,EAAAxP,OAAAoJ,EAAA,EAAApJ,CAC1CuN,EAAS1P,cADiC,GACrFoH,EAAEsH,WADmFiD,EAAA,GACvEvK,EAAEsG,WADqEiE,EAAA,GACzDvK,EAAEuH,SADuDgD,EAAA,GAEvFvK,EAAEwH,cAAgB,aAIxB,GAAIsB,GAAeC,EACjB,GAAIJ,EAAKnN,MAAM2E,YAAYnC,MAAM,8BAE/B,GAAI2K,EAAKnN,MAAM+C,QAAQhJ,OAAS,EAAG,KAAAkL,EACsBqI,EAAcR,EAAS7P,KAAO6P,EAAS5P,SAD7DoI,EAAA/F,OAAAoJ,EAAA,EAAApJ,CAAA0F,EAAA,GAC/BT,EAAEyH,gBAD6B3G,EAAA,GACZd,EAAEsG,WADUxF,EAAA,GACEd,EAAE0H,cADJ5G,EAAA,GAEjCd,EAAEwH,cAAgB,kBAGjB,KAAAgD,EAAAzP,OAAAoJ,EAAA,EAAApJ,CAC0CuN,EAAS1P,cADnD,GACDoH,EAAEsH,WADDkD,EAAA,GACaxK,EAAEsG,WADfkE,EAAA,GAC2BxK,EAAEuH,SAD7BiD,EAAA,GAEHxK,EAAEwH,cAAgB,aAGtB,GAA+B,qBAA3BmB,EAAKnN,MAAM2E,YAAoC,KAAAsK,EAAA1P,OAAAoJ,EAAA,EAAApJ,CACQuN,EAAS3P,cADjB,GAC7CqH,EAAEyH,gBAD2CgD,EAAA,GAC1BzK,EAAEsG,WADwBmE,EAAA,GACZzK,EAAE0H,cADU+C,EAAA,GAInD,GAAI9B,EAAKnN,MAAM2E,YAAYnC,MAAM,6BAA8B,CAG7D,IAAM0M,EAAS,IAAI7U,KAInB,GAAS0L,GADkB,GAFhBmJ,EAAOC,WACPD,EAAOE,cAEepO,EAAOvE,qBAAuB+Q,IAA0BM,GAAwBG,EAAQjN,EAAOxE,YAAc,IAAM,GAAM,KAAA6S,EAAA9P,OAAAoJ,EAAA,EAAApJ,CAC7FuN,EAASxP,oBADoF,GACpJkH,EAAEmH,iBADkJ0D,EAAA,GAChI7K,EAAEsG,WAD8HuE,EAAA,GAClH7K,EAAEoH,eADgHyD,EAAA,GAEtJ7K,EAAEwG,YAAa,GAKrB,GAAIjF,GAASkI,EAAM,KAAAqB,EAAA/P,OAAAoJ,EAAA,EAAApJ,CAC0CuN,EAASnP,KADnD,GACb6G,EAAEmH,iBADW2D,EAAA,GACO9K,EAAEsG,WADTwE,EAAA,GACqB9K,EAAEoH,eADvB0D,EAAA,QAGd,GAA+B,cAA3BnC,EAAKnN,MAAM2E,aAClB,GAAKsJ,EAAOlI,EAAS/E,EAAOtE,WAAY,KAAA6S,EAAAhQ,OAAAoJ,EAAA,EAAApJ,CACmBuN,EAASvP,YAD5B,GACpCiH,EAAEmH,iBADkC4D,EAAA,GAChB/K,EAAEsG,WADcyE,EAAA,GACF/K,EAAEoH,eADA2D,EAAA,SAIrC,GAA+B,cAA3BpC,EAAKnN,MAAM2E,aAClB,GAAKsJ,EAAOlI,EAAS/E,EAAOrE,WAAY,KAAA6S,EAAAjQ,OAAAoJ,EAAA,EAAApJ,CACmBuN,EAAStP,YAD5B,GACpCgH,EAAEmH,iBADkC6D,EAAA,GAChBhL,EAAEsG,WADc0E,EAAA,GACFhL,EAAEoH,eADA4D,EAAA,SAIrC,GAA+B,eAA3BrC,EAAKnN,MAAM2E,YAClB,GAAKsJ,EAAOlI,IAAW/E,EAAOpE,YAAa,KAAA6S,EAAAlQ,OAAAoJ,EAAA,EAAApJ,CACgBuN,EAASpP,kBADzB,GACvC8G,EAAEmH,iBADqC8D,EAAA,GACnBjL,EAAEsG,WADiB2E,EAAA,GACLjL,EAAEoH,eADG6D,EAAA,OAEpC,KAAAC,EAAAnQ,OAAAoJ,EAAA,EAAApJ,CACoDuN,EAASrP,QAD7D,GACH+G,EAAEmH,iBADC+D,EAAA,GACiBlL,EAAEsG,WADnB4E,EAAA,GAC+BlL,EAAEoH,eADjC8D,EAAA,GAMLvC,EAAKnN,MAAM2E,YAAYnC,MAAM,gFAC/BgC,EAAEsG,WAAgB1B,EAAY7K,sBAAwB6K,EAAY7K,mBAAqB4O,EAAK9N,MAAMzD,cAEhGuR,EAAKnN,MAAM2E,YAAYnC,MAAM,gFAC/BgC,EAAE2E,aAAgBC,EAAY7K,sBAAwB6K,EAAY7K,mBAAqB4O,EAAK9N,MAAMzD,cASpGuR,EAAKrN,SAAS0E,YA5fElB,aCwFPqM,mBAzFb,SAAAA,EAAYtQ,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAkQ,IACjBrQ,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAoQ,GAAA/P,KAAAH,KAAMJ,KAEDW,MAAQ,CACX4P,SAAW,GACX1P,WAAY,EACZC,OAAQ,GANOb,oFASE,IACZ8D,EAAM3D,KAAKJ,MAAMqC,SAAS1B,MAA1BoD,GACP,GAAW,WAAPA,EAAiB,KAAAyM,EACJpQ,KAAKJ,MAAMqC,SAAS1B,MAA5BnC,EADYgS,EACZhS,EAAGrE,EADSqW,EACTrW,EACViG,KAAKqQ,UAAUjS,EAAGrE,QACb,GAAW,QAAP4J,EAAc,KAAA2M,EACRtQ,KAAKJ,MAAMqC,SAAS1B,MAA5BmD,EADgB4M,EAChB5M,EAAG3J,EADauW,EACbvW,EACViG,KAAKuQ,OAAO7M,EAAG3J,sCAITiC,EAAI9B,GAAK,IAAAkH,EAAApB,KACXsB,EAAMC,EAAOC,UAAYD,EAAOE,SAAW,kCAAoCzF,EAErFgE,KAAKK,SAAS,CAACI,WAAY,IAE3BkB,MAAML,EAAK,CAACM,YAAa,gBACxBC,KAAK,SAAAC,GACJ,GAAIA,EAAOC,GAKT,OAJID,EAAOE,aACTwO,QAAQC,IAAI,qDACZ7P,OAAOqB,SAASC,KAAOJ,EAAOR,KAEzBQ,EAAOK,OAEd,MAAM,IAAIuJ,MAAM,gDAGnB7J,KAAK,SAAAC,GACJ,IAAIqO,EAAWrO,EAAOM,QAAQ5G,IAAK,SAAA6G,GACjC,OACEW,EAAAC,EAAAC,cAAA,OAAKC,IAAKd,EAAErG,GAAIoH,UAAU,OACtBJ,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAMC,GAAI,CAAEC,SAAU,iBAAkBlD,MAAO,CAACxG,EAAGG,KAAQ8I,EAAAC,EAAAC,cAAA,KAAGE,UAAU,qBAAb,cAC3DJ,EAAAC,EAAAC,cAACwN,GAAD,CAASrO,EAAGA,EAAG2K,OAAQ5L,EAAKxB,MAAMoN,OAAQ7Q,YAAaiF,EAAKxB,MAAMzD,iBAI1EiF,EAAKf,SAAS,CAAE8P,SAAUA,MAE3BxE,MAAM,SAAAjL,GAAK,OAAIU,EAAKf,SAAS,CAAEK,QAAOD,WAAW,qCAG7CO,EAAO9G,GAEZ,IAAImI,EAiBR,SAAqBrB,EAAO9G,GAC1B,MAAO,CACL8B,GAAI,EACJ2U,QAAS,EACTnG,GAAI,GACJE,GAAI,GACJE,GAAI,GACJE,GAAI,GACJ9J,MAAOA,EACP0B,UAAWxI,EAAM,YACjByI,QAASzI,EAAM,YACf0I,aAAc,GACdnI,aAAc,aACdgQ,KAAM,EACNE,KAAM,EACNE,KAAM,EACNE,KAAM,GAjCE6F,CAAY5P,EAAO9G,GACvBiW,EAAW,CACXnN,EAAAC,EAAAC,cAAA,OAAKC,KAAM,EAAGC,UAAU,OACpBJ,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAMC,GAAI,CAAEC,SAAU,iBAAkBlD,MAAO,CAACxG,EAAGG,KAAQ8I,EAAAC,EAAAC,cAAA,KAAGE,UAAU,qBAAb,cAC3DJ,EAAAC,EAAAC,cAACwN,GAAD,CAASrO,EAAGA,EAAG2K,OAAQhN,KAAKJ,MAAMoN,OAAQ7Q,YAAa6D,KAAKJ,MAAMzD,gBAG1E6D,KAAKK,SAAS,CAAE8P,SAAUA,qCAI1B,OACEnN,EAAAC,EAAAC,cAAA,WAAMlD,KAAKO,MAAM4P,iBAnEAtM,aCaRgN,oLAXF,IAAAhR,EAAAG,KACP,OACEgD,EAAAC,EAAAC,cAAC4N,EAAA,EAAD,KACE9N,EAAAC,EAAAC,cAAC6N,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,yBAAyBC,OAAQ,SAACtR,GAAD,OAAWoD,EAAAC,EAAAC,cAACiO,GAADrR,OAAAsR,OAAA,GAAcxR,EAAd,CAAqBoN,OAAQnN,EAAKD,MAAMoN,OAAQ7Q,YAAa0D,EAAKD,MAAMzD,kBACtI6G,EAAAC,EAAAC,cAAC6N,EAAA,EAAD,CAAOG,OAAQ,SAACtR,GAAD,OAAWoD,EAAAC,EAAAC,cAACmO,EAADvR,OAAAsR,OAAA,GAAkBxR,EAAlB,CAAyBoN,OAAQnN,EAAKD,MAAMoN,OAAQ7Q,YAAa0D,EAAKD,MAAMzD,0BAL1F0H,aCmGPyN,eAlGb,SAAAA,EAAY1R,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAsR,IACjBzR,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAwR,GAAAnR,KAAAH,KAAMJ,KAEDW,MAAQ,CACXgR,KAAM,GACNC,YAAY,EACZrV,YAAa,EACbsV,WAAY,GACZC,YAAY,EACZC,YAAY,GATG9R,mFAejBG,KAAKK,SAAS,iBAAO,CAAEqR,YAAY,EAAOC,YAAY,KAElDpQ,EAAOqQ,MAET5R,KAAK6R,YACL7R,KAAK8R,iBAKL9R,KAAKK,SAAS,iBAAO,CAACkR,KAAMhQ,EAAOxF,SAAUI,YAAaoF,EAAOxF,SAASI,mDAQ9E,IAAAiF,EAAApB,KACQsB,EAAMC,EAAOC,UAAYD,EAAOE,SAAW,4BACjDE,MAAML,EAAK,CAACM,YAAa,gBACxBC,KAAM,SAACkQ,GACFA,EAAIhQ,IACNgQ,EAAI5P,OACHN,KAAM,SAAC0P,GACe,OAAjBA,EAAKS,QACP5Q,EAAKf,SAAS,iBAAO,CAACkR,KAAMA,EAAKA,KAAMG,YAAY,KAGnD9Q,OAAOqB,SAASC,KAAOX,EAAOC,UAAYD,EAAOE,SAAWF,EAAO+L,sDAQ7E,IAAA1B,EAAA5L,KACQsB,EAAMC,EAAOC,UAAYD,EAAOE,SAAW,kCAEjDE,MAAML,EAAK,CAACM,YAAa,gBACxBC,KAAM,SAACkQ,GACFA,EAAIhQ,IACNgQ,EAAI5P,OACHN,KAAM,SAAC1F,GAENyP,EAAKvL,SAAS,iBAAO,CAAClE,YAAaA,EAAY6V,QAASL,YAAY,0CAO5E,IAAAM,EACqCjS,KAAKO,MAAhCmR,EADVO,EACUP,WAAYC,EADtBM,EACsBN,WACpB,OAAIpQ,EAAOqQ,OAASF,GAAcC,GACzB3O,EAAAC,EAAAC,cAAA,uBAGLF,EAAAC,EAAAC,cAACF,EAAAC,EAAMwF,SAAP,KACEzF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,aACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBACbJ,EAAAC,EAAAC,cAAA,OAAK4E,IAAI,4BAA4BC,IAAI,eAE3C/E,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,uBAAsBJ,EAAAC,EAAAC,cAAA,KAAGhB,KAAK,iBAAiBlG,GAAG,WAA5B,iBACtCgH,EAAAC,EAAAC,cAAA,QAAME,UAAU,oBAAmBJ,EAAAC,EAAAC,cAAA,kBAAUlD,KAAKO,MAAMgR,KAAKtV,QAAU,IAAM+D,KAAKO,MAAMgR,KAAKrV,SAA1D,OAErC8G,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBAAqBJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAOJ,EAAAC,EAAAC,cAAA,KAAGhB,KAAK,sBAAqBc,EAAAC,EAAAC,cAAA,OAAK4E,IAAI,qBAAqBC,IAAI,iBAKhI/E,EAAAC,EAAAC,cAACgP,GAAD,CAASlF,OAAUhN,KAAKO,MAAMgR,KAAKvV,GAAIG,YAAe6D,KAAKO,MAAMpE,cACjE6G,EAAAC,EAAAC,cAAA,UAAQE,UAAU,qBAAlB,uGA7FQS,aCElBsO,IAASjB,OACPlO,EAAAC,EAAAC,cAACkP,EAAA,EAAD,KACEpP,EAAAC,EAAAC,cAACmP,GAAD,OAEDjX,SAASkX,eAAe","file":"static/js/main.23a3a900.chunk.js","sourcesContent":["\r\n// ****** Konfigurationsdaten *******\r\n\r\nlet hostLocal = true\r\n\r\nconst config = {\r\n  testuser: {id:211, vorname:'Hart', nachname:'VerdrahtetAdm', permissions: 65535}, // mit Adminrechten\r\n  // testuser: {id:211, vorname:'Hart', nachname:'VerdrahtetUsr', permissions: 0}, // mit normalen Benutzerrechten\r\n  // testuser: {id:357, vorname:'Hart', nachname:'VerdrahtetUsr2', permissions: 432}, // mit normalen Benutzerrechten\r\n  stringSeparator: ' ',\r\n  smartphoneWidth: 578,\r\n  anzahlPlaetze: 6,\r\n  platzArray: [],\r\n  daypickerMaxDays: 180,\r\n  daypickerDaysBeforeToday: 3, \r\n  daypickerDaysBeforeTodayWide: 9, \r\n  buchungenlog: '/intern/api/buchungenlog.php',\r\n  platzbuchungen: '/intern/api/platz.php',\r\n\r\n  dailyStartTime: 8,\r\n  dailyEndTime: 20,\r\n  eveningTime: 1700,  // 17:00 Uhr, alte Platzordnung war 18:00 Uhr\r\n  maxMinutesDistance: 15, // Gäste und Jugendliche dürfen abends erst kurz vor der Spielzeit buchen\r\n  singleTime: 60, // = 1 Stunde\r\n  doubleTime: 120, // = 2 Stunden \r\n  turnierTime: 120, // = 2 Stunden \r\n  gastId: 1,\r\n  mitgliedId: 25,\r\n}\r\nif (hostLocal) {\r\n  config.hostname = 'localhost'\r\n  config.protokoll = 'http://'\r\n  config.loginPage = '/intern/login.php'\r\n  config.prod = false\r\n} else {    \r\n  config.hostname = 'www.tcolching.de'\r\n  config.protokoll = 'https://'\r\n  config.loginPage = '/intern/login.php'\r\n  config.prod = true\r\n}\r\n\r\nconst IMPORTANT = \"text-danger\"\r\nconst MSG = \"text-info\"\r\nconst NOSAVE = false\r\nconst SAVE = true\r\n\r\nexport const messages = {\r\n  gast: [IMPORTANT, NOSAVE, '- Bitte den Gastnamen ins Kommentarfeld schreiben und die Gebühr innerhalb einer Woche überweisen!'],\r\n  mitglied: [IMPORTANT, NOSAVE, '- Bitte nur für Mitglieder ohne Email verwenden und den Namen ins Kommentarfeld schreiben!'],\r\n  veranstaltung: [IMPORTANT, SAVE, '- Bitte den Veranstaltungsanlass ins Kommentarfeld schreiben und den Vorstand informieren!'],\r\n  spieleranzahl: [IMPORTANT, NOSAVE, '- Bitte alle Spieler eintragen!'],\r\n  jugendvorrecht: [MSG, SAVE, '- Achtung: Jugendliche haben auf Platz 6 zu dieser Zeit Vorrecht!'],\r\n  erwachsenenvorrecht: [IMPORTANT, NOSAVE, '- Buchung erst 15 Minuten vor Spielbeginn möglich, da erwachsene Vollmitglieder abends ab 17:00 Uhr Vorrecht haben.'],\r\n  einzeldauer: [IMPORTANT, NOSAVE, '- Für ein Einzel maximal 60 Minuten buchen'],\r\n  doppeldauer: [IMPORTANT, NOSAVE, '- Für ein Doppel maximal 120 Minuten buchen'],\r\n  turnier: [MSG, SAVE, '- Turnierspiele 120 Minuten. Falls möglich auf Platz 1 buchen. Parallel sollte ein Platz auf der Anlage nicht durch Turniere oder Training belegt sein! Wer Mannschaftstraining hat, darf nur auf den Plätzen der Mannschaft Turnier spielen.'],\r\n  turnierspieldauer: [IMPORTANT, NOSAVE, '- Turnierspiele 120 Minuten. Falls möglich auf Platz 1 buchen. Parallel sollte ein Platz auf der Anlage nicht durch Turniere oder Training belegt sein! Wer Mannschaftstraining hat, darf nur auf den Plätzen der Mannschaft Turnier spielen.'],\r\n  zeit: [IMPORTANT, NOSAVE, '- Der Start muss vor dem Ende liegen!'],\r\n  platzbelegt:  [IMPORTANT, NOSAVE, '- Platz bereits belegt!'],\r\n};\r\nfor (let i = 1; i <= config.anzahlPlaetze; i++) {\r\n  config.platzArray.push(i);\r\n}\r\n\r\n// ******* Rechtevergabe **********\r\nexport const permissions = {\r\n  // Es gibt 16 Rechte. Übereinandergelegt\r\n  \r\n  // Recht:        1 2 3 4  5  6  7   8   9  10   11   12   13   14    15    16\r\n  // Dezimalwert:  1 2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384 32768 \r\n  //\r\n  // Summen daraus sind kombinierte Rechte, z.B. \r\n  //                3 ist Recht 1 und Recht 2\r\n  //               15 ist Recht 1, 2, 3, 4 (1+2+4+8)\r\n  //              128 ist Recht 8\r\n  //              143 ist Recht 1,2,3,4,8\r\n    NONE : 0,\r\n    MYDATA_READ : 1,\r\n    MYDATA_WRITE : 2,\r\n    MYDATA_UPDATE : 3,          // kombiniert\r\n    ALLDATA_READ : 5,           // kombiniert\r\n    ALLDATA_WRITE : 8,  \r\n    ALLDATA_UPDATE : 15,        // kombiniert\r\n    PERMISSION_FREE_1 : 16,\r\n      MANNSCHAFTSFUEHRER : 32,\r\n      WIRT : 64,\r\n      T_ALL_PERMISSIONS : 128,    // Turnierverantwortliche\r\n    PERMISSION_FREE_2 : 256,\r\n    VORSTAND : 496,             // kombiniert 16, 32, 64, 128, 256\r\n    PERMISSION_FREE_5 : 512,\r\n    PERMISSION_FREE_6 : 1024,\r\n    PERMISSION_FREE_7 : 2048,\r\n    PERMISSION_FREE_8 : 4096,\r\n    PERMISSION_FREE_9 : 8192,\r\n    PERMISSION_FREE_10 : 16384,\r\n    PERMISSION_FREE_11 : 32768,\r\n      ADMINISTRATOR : 65535,\r\n};\r\n\r\nexport default config;\r\n","export const formatDate = (d) =>\r\n{\r\n  var month = '' + (d.getMonth() + 1),\r\n      day = '' + d.getDate(),\r\n      year = d.getFullYear();\r\n\r\n  if (month.length < 2) month = '0' + month;\r\n  if (day.length < 2) day = '0' + day;\r\n\r\n  return [year, month, day].join('-');  \r\n}\r\n\r\n// ***** date array \r\nexport const getDateArray = (start, end) => \r\n{\r\n  let dt = new Date(start),\r\n      arr = [];\r\n  while (dt <= end) {\r\n    arr.push({ name: formatDate(dt), text: dt.toLocaleDateString(\"de-DE\",{ weekday: 'short', month: 'short', day: 'numeric' })});\r\n    dt.setDate(dt.getDate() + 1);\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport const isValidDate = (d) => \r\n{\r\n  return d instanceof Date && !isNaN(d);\r\n}\r\n\r\nexport const spielerzusatz = (geburtsdatum, schnupper) => \r\n{\r\n  let aktuellesJahr = new Date();\r\n  aktuellesJahr = aktuellesJahr.getFullYear();\r\n  let geburtsjahr = new Date(geburtsdatum);\r\n  geburtsjahr = geburtsjahr.getFullYear();\r\n  const jugend = (aktuellesJahr - geburtsjahr) < 18 ? true : false;\r\n  // console.log(`${geburtsdatum} ${geburtsjahr} ${aktuellesJahr} ${jugend}` );\r\n  let zusatz = ' (' + (jugend ? 'Jug' : '') + (Number(schnupper) === 1 ? ',Schn' : '') + ')'\r\n  zusatz = zusatz.replace('(,', '(')\r\n  zusatz = zusatz.replace('()', '')\r\n  return zusatz\r\n}\r\n\r\n// jugendlicher = nicht voll Berechtigt\r\nexport const jugendlicher = (geburtsdatum) => {\r\n  if (typeof(geburtsdatum) === 'undefined' || geburtsdatum === null)\r\n  {\r\n    return false;\r\n  }\r\n  let aktuellesJahr = new Date();\r\n  aktuellesJahr = aktuellesJahr.getFullYear();\r\n  let geburtsjahr = new Date(geburtsdatum);\r\n  geburtsjahr = geburtsjahr.getFullYear();\r\n  const jugend = ((aktuellesJahr - geburtsjahr) < 18) ? true : false;\r\n  // console.log(`${geburtsdatum} ${geburtsjahr} ${aktuellesJahr} ${jugend}` );\r\n  return jugend;\r\n}\r\n\r\n// Serverzeit?\r\nexport const servertimeNow = () => {\r\n  const cookies = parseCookie(document.cookie)\r\n  const servertime = cookies['servertime']\r\n  const st = new Date(Number(servertime)) \r\n  return st\r\n}\r\n\r\n//#Source https://bit.ly/2neWfJ2 \r\nconst parseCookie = str =>\r\n  str\r\n    .split(';')\r\n    .map(v => v.split('='))\r\n    .reduce((acc, v) => {\r\n      acc[decodeURIComponent(v[0].trim())] = decodeURIComponent(v[1].trim());\r\n      return acc;\r\n    }, {});\r\n\r\n\r\n///////////////////////// KANN DAS FUNKTIONIEREN??? //////////////////////\r\n// const Model = () => {\r\n//   let liste = {};\r\n//   registerListener(callback) {\r\n//     liste                               ;\r\n//   }\r\n//   unregisterListener(callback) {\r\n//     callback.setTafelDatum(this.tafelDatum)///////////////////////////////////\r\n//   }\r\n// }\r\n\r\n// Auswahl über Mausposition???\r\n// handleClick (e) {\r\n  \r\n//   var offset = $(this).offset();\r\n//   var hoehe = $(this).height(); \r\n//   var relativeX = (e.pageX - offset.left);\r\n//   var relativeY = (e.pageY - offset.top);\r\n//   var halbeStdHoehe = (hoehe - 30)/13;     \r\n//   var std = relativeY/halbeStdHoehe;\r\n//   var minuten = Math.round((std - Math.floor(std))) * 30;\r\n//   std = Math.floor(std) + 7;\r\n\r\n//   alert(\"X: \" + relativeX + \"  Y: \" + relativeY + \" Zeit: \" + std + \":\" + minuten + \" h, Höhe: \" + hoehe);\r\n    \r\n// };\r\n","import React, { Component } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\nimport { spielerzusatz } from './functions';\r\nimport Config, { permissions } from './Defaults';\r\n\r\n\r\n// Alle Belegungen an diesem Tag für einen Platz\r\n\r\nclass Platz extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      courtData: [],\r\n      isLoading : false,\r\n      error : false,\r\n      width: window.innerWidth,\r\n      zumBelegungstag: false,\r\n    };\r\n  }\r\n  \r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.day !== prevProps.day) {\r\n      const {court, day, permissions} = this.props;\r\n      this.fetchPlatz(court, day, permissions);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { court, day, permissions } = this.props;\r\n    this.fetchPlatz(court, day, permissions);\r\n  }\r\n  \r\n  fetchPlatz(court, day, uPermissions) {\r\n    const userIsAllowed = ((permissions.MANNSCHAFTSFUEHRER & uPermissions) > 0);\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/platz.php?op=ra&p=\" + court + \"&ds=\" + day + \"&de=\" + day;\r\n    window.addEventListener('resize', this.handleWindowSizeChange);\r\n    \r\n    this.setState({isLoading : true});\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then(result => {\r\n      if (result.ok) {\r\n        if (result.redirected) {\r\n          // console.log(\"Platz.js/Checkuser: Authentifizierungsfehler\")\r\n          window.location.href = result.url\r\n        }\r\n        return result.json();\r\n        } else {\r\n          // In diesem Fall haben wir einen neuen, noch unbebuchten Tag\r\n          this.setState({isLoading : false});\r\n        }\r\n      })\r\n    .then (result => {\r\n      let courtData = result.records.map ( r => {\r\n        let k = r.id\r\n        let spieler\r\n        let cn = computeBelClasses (r.starts_at, r.ends_at, r.booking_type);\r\n        spieler = formatSpieler(r, this.props.platzWide)\r\n\r\n        if ( !userIsAllowed && (r.booking_type.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)))\r\n        {\r\n          return ( \r\n            <div key={k} className={cn}>\r\n              <strong>{r.starts_at.substring(11,16)}</strong> {spieler} \r\n              <div> {r.comment} </div>\r\n            </div>\r\n          )\r\n        } else {\r\n          return ( \r\n            <Link key={k} className={cn} to={{ pathname: '/intern/tafel/belegung', state: {c: court, i: r.id, d: day, op: 'update'} }}>\r\n              <strong>{r.starts_at.substring(11,16)}</strong> {spieler}\r\n              <div> {r.comment} </div>\r\n            </Link>\r\n          )\r\n        }\r\n      })\r\n      this.setState({courtData: courtData});\r\n      this.setState({isLoading : false});\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleWindowSizeChange);\r\n  }\r\n\r\n  handleWindowSizeChange = () => {\r\n    // this.setState({ width: window.innerWidth });\r\n    this.setState({ zumBelegungstag: true });\r\n  };\r\n  \r\n  render() {\r\n    return this.state.courtData;\r\n  }\r\n}\r\n\r\n// Spielernamen bilden\r\nconst formatSpieler = (r, platzWide) =>\r\n{\r\n  let spieler = []\r\n  \r\n  // Vorname und Name verketten. Vorname bei wenig Platz abkürzen\r\n  spieler[0] = (r.p1vn ? (platzWide ? r.p1vn : r.p1vn.charAt(0) + '.') + ' ' + r.p1nn : (r.p1nn) ? r.p1nn : '') + spielerzusatz(r.p1geb, r.schnupper1)\r\n  spieler[1] = (r.p2vn ? (platzWide ? r.p2vn : r.p2vn.charAt(0) + '.') + ' ' + r.p2nn : (r.p2nn) ? r.p2nn : '') + spielerzusatz(r.p2geb, r.schnupper2)\r\n  spieler[2] = (r.p3vn ? (platzWide ? r.p3vn : r.p3vn.charAt(0) + '.') + ' ' + r.p3nn : (r.p3nn) ? r.p3nn : '') + spielerzusatz(r.p3geb, r.schnupper3)\r\n  spieler[3] = (r.p4vn ? (platzWide ? r.p4vn : r.p4vn.charAt(0) + '.') + ' ' + r.p4nn : (r.p4nn) ? r.p4nn : '') + spielerzusatz(r.p4geb, r.schnupper4)\r\n  \r\n  // Führende Punkt und Whitespace entfernen, falls es sowas gibt\r\n  spieler = spieler.map( s => s.replace(new RegExp(/^[\\.\\s]+/g), '') )\r\n  \r\n  spieler = spieler.join(', ')\r\n\r\n  // ... und trailing Kommas, Whitespaces entfernen\r\n  spieler = spieler.replace(new RegExp(/[,\\s]*$/g), '')\r\n\r\n  return spieler\r\n\r\n}\r\n\r\n// CSS-Klassen bilden für die Positionierung und Höhe einer Belegung auf der Tafel\r\nconst computeBelClasses = (s, e, bookingType) =>\r\n{\r\n  // Dauer berechnen, also z. B. '2019-05-02 16:00:00' - '2019-05-02 14:00:00' = 120\r\n  const dauer = (Number(e.substring(11,13))*60 + Number(e.substring(14,16))) - (Number(s.substring(11,13))*60 + Number(s.substring(14,16)));\r\n  const bt = bookingType\r\n  let cn = classNames(\r\n    'D-' + dauer,\r\n    'ts', \r\n    'T-' + s.substring(11, 16).replace(':', '-'),\r\n    bt\r\n    );\r\n  return cn;\r\n}\r\n\r\nexport default Platz;\r\n","import React, { Component } from 'react';\r\nimport ScrollMenu from 'react-horizontal-scrolling-menu';\r\nimport {getDateArray} from \"./functions\";\r\nimport Config from './Defaults';\r\n\r\n\r\n// Das ist das Array mit den Tagen\r\nlet list = [];\r\n\r\n// One item component\r\n// selected prop will be passed\r\nconst MenuItem = ({ text, selected }) => {\r\n  return (\r\n    <div className={`dateBtn ${selected ? 'aktiv' : ''}`}>\r\n      {text}\r\n    </div>\r\n  );\r\n};\r\n\r\n// All items component\r\n// Important! add unique key\r\nexport const Menu = (list) => list.map(el => {\r\n  const { name, text } = el;\r\n\r\n  return (\r\n    <MenuItem\r\n      text={text}\r\n      key={name}\r\n    />\r\n  );\r\n});\r\n\r\nconst Arrow = ({ text, className }) => {\r\n  return (\r\n    <div\r\n      // className={className}\r\n      className=\"dateBtn arrowPicker\"\r\n    >{text}</div>\r\n  );\r\n};\r\n\r\nconst ArrowLeft = Arrow({ text: '<', className: 'arrow-prev' });\r\nconst ArrowRight = Arrow({ text: '>', className: 'arrow-next' });\r\n\r\nclass DayPicker extends Component {\r\n  state = {\r\n    selected: 0\r\n  };\r\n\r\n  componentWillMount() {\r\n    const {startswith, day} = this.props;\r\n    let end = new Date(day);\r\n    end.setDate(end.getDate() + Config.daypickerMaxDays);\r\n    list = getDateArray(startswith, end);\r\n    this.setState({selected: day});\r\n  }\r\n\r\n  onSelect = key => {\r\n    this.setState({ selected: key }, () => this.props.onClickHandler(key));\r\n  }\r\n  render() {\r\n    const { selected } = this.state;\r\n    // Create menu from items\r\n    const menu = Menu(list, selected);\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <ScrollMenu\r\n          data={menu}\r\n          arrowLeft={ArrowLeft}\r\n          arrowRight={ArrowRight}\r\n          selected={selected}\r\n          onSelect={this.onSelect}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default DayPicker;\r\n  \r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport Platz from \"./Platz\";\r\nimport DayPicker from \"./DayPicker\";\r\nimport \"./tafel.css\";\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport config from './Defaults';\r\nimport {formatDate, isValidDate} from \"./functions\";\r\nimport { Link } from 'react-router-dom';\r\n\r\n// Layout eines Tages\r\n\r\nclass Belegungstag extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      width: window.innerWidth,\r\n      day: '',\r\n      dayDate: '',\r\n    };\r\n  }    \r\n  componentWillMount() {\r\n    window.addEventListener('resize', this.handleWindowSizeChange);\r\n    let dayDate = this.props.match.params.day;\r\n    if ( ! isValidDate(new Date(dayDate)) ) {\r\n      dayDate = new Date();\r\n    } else {\r\n      dayDate = new Date(dayDate);\r\n    }\r\n    this.setState({ dayDate: dayDate, day: formatDate(dayDate) });\r\n    // let day = \"2019-05-02\";\r\n    this.setDay = this.setDay.bind(this);\r\n  }\r\n\r\n  // make sure to remove the listener\r\n  // when the component is not mounted anymore\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleWindowSizeChange);\r\n  }\r\n\r\n  handleWindowSizeChange = () => {\r\n    this.setState({ width: window.innerWidth });\r\n  };\r\n\r\n  setDay(dString) {\r\n    const d = new Date(dString);\r\n    this.setState({dayDate: d, day: formatDate(d)});\r\n  }\r\n    \r\n  render() {\r\n    const { width } = this.state;\r\n    let firstDaypickerDay = new Date();\r\n    const isMobile = (width <= config.smartphoneWidth);\r\n    if (isMobile) {\r\n      firstDaypickerDay.setDate(firstDaypickerDay.getDate() - config.daypickerDaysBeforeToday);\r\n      const courtDiv = config.platzArray.map( (court) => {\r\n        return (\r\n          <div key={court} id={\"platz\" + court}>\r\n            <table className=\"table\">\r\n              <tbody>\r\n                <tr className=\"platzDim\">\r\n                  <td className=\"zeitleisteCol\"><Zeitleiste /></td>\r\n                  <td className=\"platz\">\r\n                    <div className=\"platznummer\">\r\n                      <span className=\"platzziffer\">{court}</span> \r\n                      <Link to={{pathname: '/intern/tafel/belegung', state: {c: court, d: this.state.day, op: 'new'} }}><img  className=\"neuBtn p-1 rounded-circle\" src=\"images/add.png\" alt=\"Neue Belegung\" /></Link> \r\n                    </div>\r\n                    <div>\r\n                      <Platz court={court} day={this.state.day} permissions={this.props.permissions} platzWide={true} />\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )\r\n      })\r\n      return (\r\n        <div>\r\n          <DayPicker startswith={firstDaypickerDay} day={this.state.day} onClickHandler={this.setDay} />\r\n          <SwipeableViews>\r\n            {courtDiv}\r\n          </SwipeableViews>\r\n          <Legende />\r\n        </div>\r\n      )\r\n    } else {\r\n      firstDaypickerDay.setDate(firstDaypickerDay.getDate() - config.daypickerDaysBeforeTodayWide);\r\n      const courtDiv = config.platzArray.map( (court) => {\r\n        return (<td key={court} id={\"platz\" + court} className=\"platz\">\r\n          <div>\r\n            <div className=\"platznummer\">\r\n              <span className=\"platzziffer rounded-circle\">{court}</span> \r\n              <Link to={{pathname: '/intern/tafel/belegung', state: {c: court, d: this.state.day, op: 'new'} }}><img  className=\"neuBtn p-1 rounded-circle\" src=\"images/add.png\" alt=\"Neue Belegung\" /></Link> \r\n            </div>\r\n            <div>            \r\n              <Platz court={court} day={this.state.day} permissions={this.props.permissions} platzWide={false} />\r\n              </div>\r\n            </div>\r\n          </td>\r\n        )\r\n      })\r\n      return (\r\n        <div>\r\n          <DayPicker startswith={firstDaypickerDay} day={this.state.day} onClickHandler={this.setDay} />\r\n          <table className=\"table\">\r\n            <tbody>\r\n              <tr className=\"platzDim\">\r\n                <td className=\"zeitleisteCol\"><Zeitleiste /> </td>\r\n                {courtDiv}\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <Legende />\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst Zeitleiste = () => {\r\n  let zeit = [];\r\n  for (let s = config.dailyStartTime; s <= config.dailyEndTime; s++) {\r\n    for (let m = 0; m < 60; m=m+60) {\r\n      zeit.push (s.toString().padStart(2, '0') + ':' + m.toString().padStart(2, '0'));\r\n    }\r\n  } \r\n  return (\r\n    <div className=\"zeitleiste\">\r\n      {\r\n        zeit.map((e, index) => \r\n          <React.Fragment key={index}>\r\n            <div className=\"stunde\"><div className=\"stundetext\">{e}</div></div>\r\n            <div className=\"viertelstunde\"></div>\r\n            <div className=\"viertelstunde\"></div>\r\n            <div className=\"viertelstunde\"></div>\r\n          </React.Fragment>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Legende = () => {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row l-einzeldoppel p-0 pl-1 m-1\">Einzel/Doppel</div>\r\n      <div className=\"row l-turnier p-0 pl-1 m-1\">Turnier</div>\r\n      <div className=\"row l-veranstaltung p-0 pl-1 m-1\">Veranstaltung</div>\r\n      <div className=\"row l-punktspiele p-0 pl-1 m-1\">Punktspiele</div>\r\n      <div className=\"row l-training p-0 pl-1 m-1\">Training</div>\r\n      {/* <div className=\"row l-nichtreservierbar p-0 pl-1 m-1\">Frei verfügbar / Anderes</div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Belegungstag;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","//\r\nimport React, { Component } from 'react';\r\nimport Config, { messages as Messages, permissions as Permissions } from './Defaults';\r\nimport { Redirect } from 'react-router';\r\nimport { spielerzusatz, servertimeNow, jugendlicher as isJugendlicher } from './functions';\r\nimport _ from 'lodash';\r\nimport Holidays from 'date-holidays';\r\n\r\nclass BelForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSave = this.handleSave.bind(this);\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n\r\n    const { r } = props;\r\n    // Daten für Datum, Start und Ende extrahieren\r\n    let [sd, st] = r.starts_at.split(' ')\r\n    let scd = new Date(sd)\r\n    let ssd = servertimeNow()\r\n    scd.setHours(0,0,0,0)\r\n    ssd.setHours(0,0,0,0)\r\n    \r\n    const dateIsToday = (scd.valueOf() === ssd.valueOf())\r\n\r\n    // Initialer Wert für neue Buchungen. Wenn Einzel/Doppel erlaubt/nicht erlaubt sind, hier ändern\r\n    const bookingType = (r.booking_type === '') ? (dateIsToday ? 'ts-einzel' : 'ts-turnier') : r.booking_type;\r\n    const deleteActive = r.booking_type.match(/(ts-nichtreservierbar)/ig) \r\n        ? (Permissions.T_ALL_PERMISSIONS === (Permissions.T_ALL_PERMISSIONS & this.props.permissions)) \r\n        : true;\r\n\r\n    let [ed, et] = r.ends_at.split(' ');\r\n    let sdA = sd.split('-');\r\n    this.state = {\r\n      r: r,\r\n      spieltag: sdA[2] + '.' + sdA[1] + '.' + sdA[0],\r\n      startsAtDate: sd,\r\n      endsAtDate: ed,\r\n      startsAtStd: st.substring(0, 2),\r\n      startsAtViertel: st.substring(3, 5),\r\n      endsAtStd: et.substring(0, 2),\r\n      endsAtViertel: et.substring(3, 5),\r\n      bookingType: bookingType,\r\n      comment: (typeof r.comment === \"undefined\") ? \"\" : r.comment,\r\n      p1: r.p1id,\r\n      p2: r.p2id,\r\n      p3: r.p3id,\r\n      p4: r.p4id,\r\n      p1Schn: r.schnupper1,\r\n      p2Schn: r.schnupper2,\r\n      p3Schn: r.schnupper3,\r\n      p4Schn: r.schnupper4,\r\n      spieler: [],\r\n      court: r.court,\r\n      zurTafel: false,\r\n      saveActive: true,\r\n      deleteActive: deleteActive,\r\n      admin: false,\r\n      dateIsToday: dateIsToday,\r\n      overbooked: false,\r\n      jugend: false,\r\n      nichtVollBerechtigte: false,\r\n    };\r\n\r\n  }\r\n\r\n  componentWillMount() {\r\n    // Alle Spieler für die Select-Auswahl laden    \r\n    let url = Config.protokoll + Config.hostname + \"/intern/api/spieler.php\";\r\n    this.setState({ isLoading: true });\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          // console.log(result);\r\n          return result.json();\r\n        } else {\r\n          throw new Error('Fehler beim Laden der Spielerdaten');\r\n        }\r\n      })\r\n      .then(result => {\r\n        let spieler = result.records;\r\n        // console.log(spieler);\r\n        this.setState({ spieler: spieler })\r\n      })\r\n      .catch(error => this.setState({ error, isLoading: false }));\r\n    \r\n  }\r\n\r\n  render() {\r\n    // console.log(\"startsAtStd:\" + this.state.startsAtStd);\r\n    if (this.state.zurTafel === true) {\r\n      return <Redirect to={{pathname: \"/intern/tafel/\", state: this.state.startsAtDate}} />\r\n    }\r\n    const condMF = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n    return (\r\n      <div>\r\n        <h1>Spieltag: {this.state.spieltag}</h1>\r\n        <form className=\"form-inline\">\r\n          <fieldset className=\"fields\">\r\n            <div><strong>Platz</strong></div>\r\n            <div className=\"form-group\">\r\n              <select id=\"court\" className=\"form-control\" onChange={this.handleChange} value={this.state.court}>\r\n                <option value=\"--\">--</option>\r\n                <option value=\"1\">1</option>\r\n                <option value=\"2\">2</option>\r\n                <option value=\"3\">3</option>\r\n                <option value=\"4\">4</option>\r\n                <option value=\"5\">5</option>\r\n                <option value=\"6\">6</option>\r\n              </select>\r\n            </div>\r\n            <div><strong>Buchungstyp</strong></div>\r\n            { !this.state.dateIsToday && \r\n              <p>Einzel-/Doppel-Buchung nur am aktuellen Tag möglich</p>\r\n            }\r\n            <select id=\"bookingType\" className=\"form-control\" onChange={this.handleChange} value={this.state.bookingType}>\r\n              <option disabled={!this.state.dateIsToday} value=\"ts-einzel\">Einzel</option>\r\n              <option disabled={!this.state.dateIsToday} value=\"ts-doppel\">Doppel</option>\r\n              <option value=\"ts-turnier\">Turnier</option>\r\n              <option disabled={!condMF} value=\"ts-veranstaltung\">Veranstaltung</option>\r\n              <option disabled={!condMF} value=\"ts-training\">Training</option>\r\n              <option disabled={!condMF} value=\"ts-punktspiele\">Punktspiele</option>\r\n            </select>\r\n            <div><strong>Start</strong> <span id=\"startsAtMsg\" className={this.state.startsAtMsgClass}>{this.state.startsAtMsgTxt}</span></div>\r\n            <div className=\"form-group\">\r\n              <select id=\"startsAtStd\" className={'form-control ' + this.state.startsAtMsgClass} onChange={this.handleChange} value={this.state.startsAtStd}>\r\n                <option value=\"08\">08</option>\r\n                <option value=\"09\">09</option>\r\n                <option value=\"10\">10</option>\r\n                <option value=\"11\">11</option>\r\n                <option value=\"12\">12</option>\r\n                <option value=\"13\">13</option>\r\n                <option value=\"14\">14</option>\r\n                <option value=\"15\">15</option>\r\n                <option value=\"16\">16</option>\r\n                <option value=\"17\">17</option>\r\n                <option value=\"18\">18</option>\r\n                <option value=\"19\">19</option>\r\n                <option value=\"20\">20</option>\r\n              </select>\r\n              <select id=\"startsAtViertel\" className={'form-control ' + this.state.startsAtMsgClass} onChange={this.handleChange} value={this.state.startsAtViertel}>\r\n                <option value=\"00\">00</option>\r\n                <option value=\"15\">15</option>\r\n                <option value=\"30\">30</option>\r\n                <option value=\"45\">45</option>\r\n              </select>\r\n            </div>\r\n            <div><strong>Ende</strong></div>\r\n            <div className=\"form-group\">\r\n              <select id=\"endsAtStd\" className={'form-control ' + this.state.endsAtMsgClass} onChange={this.handleChange} value={this.state.endsAtStd}>\r\n                <option value=\"08\">08</option>\r\n                <option value=\"09\">09</option>\r\n                <option value=\"10\">10</option>\r\n                <option value=\"11\">11</option>\r\n                <option value=\"12\">12</option>\r\n                <option value=\"13\">13</option>\r\n                <option value=\"14\">14</option>\r\n                <option value=\"15\">15</option>\r\n                <option value=\"16\">16</option>\r\n                <option value=\"17\">17</option>\r\n                <option value=\"18\">18</option>\r\n                <option value=\"19\">19</option>\r\n                <option value=\"20\">20</option>\r\n                <option value=\"21\">21</option>\r\n              </select>\r\n              <select id=\"endsAtViertel\" className={'form-control ' + this.state.endsAtMsgClass} onChange={this.handleChange} value={this.state.endsAtViertel}>\r\n                <option value=\"00\">00</option>\r\n                <option value=\"15\">15</option>\r\n                <option value=\"30\">30</option>\r\n                <option value=\"45\">45</option>\r\n              </select>\r\n            </div>\r\n            <div><strong>Spieler</strong> <span id=\"p1Msg\" className={this.state.p1MsgClass}>{this.state.p1MsgTxt}</span></div>\r\n            <div className=\"form-row\">\r\n              <select id=\"p1\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p1}>\r\n                <option value=\"0\">- Bitte auswählen -</option>\r\n                {this.state.spieler.map(r => {\r\n                  return (\r\n                    <option key={'p1' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                  )\r\n                })}\r\n              </select>\r\n              {(this.state.bookingType.match(/(ts-einzel)|(ts-turnier)|(ts-doppel)/ig)) ?\r\n                <select id=\"p2\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p2}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p2' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n            </div>\r\n            <div className=\"form-row\">\r\n              {(this.state.bookingType===\"ts-doppel\") ?\r\n                <select id=\"p3\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p3}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p3' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n              {(this.state.bookingType===\"ts-doppel\") ?\r\n                <select id=\"p4\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p4}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p4' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n            </div>\r\n\r\n            <div><strong>Bemerkung</strong> <span id=\"commentMsg\" className={this.state.commentMsgClass}>{this.state.commentMsgTxt}</span></div>\r\n            <div className=\"form-group\">\r\n              <input type=\"text\" id=\"comment\" className={'form-control w-100 ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.comment} placeholder=\"Spielergebnis, Gastname, ...\" />\r\n            </div>\r\n\r\n            <button type=\"submit\" onClick={e => { this.handleSave(e) }} className=\"btn btn-primary m-1\" disabled={!this.state.saveActive}>Speichern</button>\r\n            <button type=\"submit\" onClick={e => { this.handleDelete(e) }} className=\"btn btn-primary m-2\" disabled={!this.state.deleteActive}>Löschen</button>\r\n          </fieldset>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  handleSave(e) {\r\n    e.preventDefault();\r\n    // console.log(\"SAVE FORM DATA NOW!\");\r\n    const s = {}\r\n    // Meldungen zurücksetzen\r\n    s.startsAtMsgTxt = ''\r\n    s.startsAtMsgClass = ''\r\n    s.saveActive = true\r\n    s.p1MsgFormCtrl = ''\r\n\r\n    let parameters =\r\n      '?op=cu'\r\n      + '&rid=' + this.state.r.id\r\n      + '&ds=' + this.state.startsAtDate + ' ' + this.state.startsAtStd + ':' + this.state.startsAtViertel\r\n      + '&de=' + this.state.endsAtDate + ' ' + this.state.endsAtStd + ':' + this.state.endsAtViertel\r\n      + '&uid=' + this.props.userId\r\n      + '&p1=' + this.state.p1\r\n      + '&p2=' + this.state.p2\r\n      + '&p3=' + this.state.p3\r\n      + '&p4=' + this.state.p4\r\n      + '&c=' + this.state.court\r\n      + '&t=' + this.state.bookingType\r\n      + '&cmt=' + this.state.comment\r\n      + '&pr=0'\r\n      ;\r\n    let url = Config.protokoll + Config.hostname\r\n      + '/intern/api/platz.php'\r\n      + parameters;\r\n    // console.log(url);\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          return result.json()\r\n        } else {\r\n          throw new Error('Fehler beim Erzeugen/Updaten der Belegung' + this.state.r.id);\r\n        }\r\n      })\r\n      .then(result => {\r\n        let rc = result.records[0].returncode;\r\n        if (rc === 'ok') {\r\n          // Logging der Buchung\r\n          let logurl =\r\n            Config.protokoll\r\n            + Config.hostname\r\n            + Config.buchungenlog\r\n            + parameters;\r\n          fetch(logurl, { credentials: 'same-origin' }); // Wenn Logging fehlschlagen sollte, dann verzichten wir eben darauf\r\n          this.setState({ zurTafel: true })\r\n        } else if (rc === 'bereits belegt') {\r\n          // Fehlermeldung\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.platzbelegt;\r\n        } else {\r\n          // User nicht authentifiziert oder etwas stimmt generell nicht\r\n          window.location.href = Config.loginPage\r\n        }\r\n        // Alle Ergebnisse in den State\r\n        this.setState(s)\r\n      })\r\n  }\r\n\r\n  handleDelete(e) {\r\n    const sdStr = this.state.startsAtDate + 'T' + this.state.startsAtStd + ':' + this.state.startsAtViertel + \"Z\";\r\n    const sd = new Date(sdStr);\r\n    const jetzt = new Date();\r\n\r\n    e.preventDefault();\r\n\r\n    if (sd >= jetzt || (Permissions.VORSTAND & this.props.permissions)) {\r\n      let parameters =\r\n        '?op=d'\r\n        + '&rid=' + this.state.r.id\r\n        + '&uid=' + this.props.userId;\r\n      let url =\r\n        Config.protokoll\r\n        + Config.hostname\r\n        + Config.platzbuchungen\r\n        + parameters;\r\n      fetch(url, { credentials: 'same-origin' })\r\n        .then(result => {\r\n          if (result.ok) {\r\n            // Logging der Buchung\r\n            let logurl = Config.protokoll + Config.hostname\r\n              + Config.buchungenlog\r\n              + parameters;\r\n            fetch(logurl, { credentials: 'same-origin' });\r\n            this.setState({ zurTafel: true });\r\n          }\r\n        })\r\n    } else {\r\n      this.setState({ zurTafel: true });\r\n    }\r\n    e.preventDefault();\r\n\r\n  }\r\n\r\n  handleChange(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({ [e.target.id]: e.target.value }, () => {\r\n      const s = {}\r\n\r\n      // Meldungen zurücksetzen\r\n      s.p1MsgTxt = ''\r\n      s.p1MsgClass = ''\r\n      s.startsAtMsgTxt = ''\r\n      s.startsAtMsgClass = ''\r\n      s.commentMsgTxt = ''\r\n      s.commentMsgClass = ''\r\n      s.saveActive = true\r\n      s.deleteActive = true\r\n      s.p1MsgFormCtrl = ''\r\n      s.overbooked = false\r\n\r\n      // Bedingungen\r\n      let condEinGast = false\r\n      let condEinMitglied = false\r\n      let condEinSpielerJug = false\r\n      let condEinSpielerErwVoll = false\r\n      let condDoppelteSpieler = false\r\n      let condAbendZeit = false\r\n      let condEinSchnuppermitglied = false\r\n\r\n      const datestring = this.state.startsAtDate + 'T' + this.state.startsAtStd + ':' + this.state.startsAtViertel + \"Z\"\r\n      const sd = new Date(datestring)\r\n      const hd = new Holidays()\r\n      hd.init('DE', 'BY')\r\n      const condFeiertag = hd.isHoliday(sd) ? true : false\r\n      const condSonnOderFeiertag = (condFeiertag || (sd.getDay() === 0) || (sd.getDay() === 6))\r\n      // const condPlatz6 = (Number(this.state.court) === 6)\r\n\r\n      // Validierung\r\n      // -----------\r\n      // Es wird validiert, ob Erwachsene, Schnuppermitglieder und Jugendliche \r\n      // wirklich spielberechtigt sind und ob die eingetragenen Zeiten stimmen\r\n\r\n      const start = Number(this.state.startsAtStd) * 60 + Number(this.state.startsAtViertel)\r\n      const ende = Number(this.state.endsAtStd) * 60 + Number(this.state.endsAtViertel)\r\n      const pKeys = [];\r\n\r\n      pKeys[0] = _.find(this.state.spieler, { 'id': this.state.p1 })\r\n      pKeys[1] = _.find(this.state.spieler, { 'id': this.state.p2 })\r\n      pKeys[2] = _.find(this.state.spieler, { 'id': this.state.p3 })\r\n      pKeys[3] = _.find(this.state.spieler, { 'id': this.state.p4 })\r\n\r\n      // Haben wir einen GAST oder ein Mitglied ohne Namen?\r\n      const {p1, p2, p3, p4} = this.state;\r\n      [p1,p2,p3,p4].forEach( (p) => {\r\n        if (Number(p) === Config.gastId) {\r\n          condEinGast = true\r\n        }\r\n        if (Number(p) === Config.mitgliedId) {\r\n          condEinMitglied = true\r\n        }\r\n      })\r\n\r\n      // Haben wir ein Schnuppermitglied?\r\n      const {p1Schn, p2Schn, p3Schn, p4Schn} = this.state;\r\n      [p1Schn,p2Schn,p3Schn,p4Schn].forEach( (p) => {\r\n        if (p != null) {\r\n          condEinSchnuppermitglied = (Number(p) === 1) \r\n        }\r\n      })\r\n\r\n      // Ist ein Jugendlicher dabei? Ist ein erwachsenes Vollmitglied dabei?\r\n      // Welche Geburtsdaten haben die Spieler?\r\n      pKeys.map(k => {\r\n        if (k != null) // \r\n        {\r\n          if ( ! ((isJugendlicher(k['geburtsdatum']) || k['schnupper']) !== \"0\" )) {\r\n            condEinSpielerErwVoll = true\r\n          } else {\r\n            condEinSpielerJug = true\r\n          }\r\n          return k['geburtsdatum']\r\n        }\r\n        return undefined\r\n      })\r\n\r\n      condAbendZeit = (ende) > Config.eveningTime\r\n\r\n      // Message an der Spielzeit\r\n      // Formal müssen Spieler korrekt eingetragen sein\r\n      if (this.state.bookingType.match(/(ts-veranstaltung)|(ts-training)|(ts-nichtreservierbar)/ig)) { \r\n        // Ein Spieler muss eingetragen werden\r\n        if (Number(this.state.p1) === 0) {\r\n          [ s.p1msgClass, s.p1MsgClass, s.p1MsgTxt ] = Messages.spieleranzahl\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n        // Spieler 2 bis 4 werden \"gelöscht\"\r\n        s.p2 = s.p3 = s.p4 = 0\r\n      }\r\n      if (this.state.bookingType.match(/(ts-turnier)|(ts-einzel)/ig)) {\r\n        // Zwei Spieler müssen eingetragen werden, beide nicht 0 und unterschiedlich\r\n        if (Number(this.state.p1) === 0 || Number(this.state.p2) === 0) {\r\n          [ s.p1msgClass, s.saveActive, s.p1MsgTxt ] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        } else if (this.state.p1 === this.state.p2) {  \r\n          // Sind die Spieler doppelt?\r\n          condDoppelteSpieler = true;\r\n          [ s.p1msgClass, s.saveActive, s.p1MsgTxt ] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n        // Spieler 3 bis 4 werden \"gelöscht\"\r\n        s.p3 = s.p4 = 0\r\n      }\r\n      if (this.state.bookingType === \"ts-doppel\") {\r\n        // Vier Spieler\r\n        // Sind unter 4 Spielern welche doppelt?\r\n        condDoppelteSpieler = (_.uniq([this.state.p1, this.state.p2, this.state.p3, this.state.p4]).length < 4)\r\n        \r\n        if (!condEinGast) {\r\n          if (condDoppelteSpieler || (Number(this.state.p3) === 0 || Number(this.state.p4) === 0)) {\r\n            [ s.p1MsgClass, s.saveActive, s.p1MsgTxt ] = Messages.spieleranzahl;\r\n            s.p1MsgFormCtrl = 'is-invalid'\r\n          }\r\n        }\r\n      }\r\n      if (condEinGast || condEinMitglied) {\r\n        if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)/ig)) {\r\n          // Gäste und unbenannte Mitglieder müssen einen Kommentar/Namen vermerken. Mind. 2 Zeichen\r\n          if (this.state.comment.length < 2) {\r\n            [ s.commentMsgClass, s.saveActive, s.commentMsgTxt ] = condEinGast ? Messages.gast : Messages.mitglied\r\n            s.p1MsgFormCtrl = 'is-invalid'\r\n          }\r\n        }\r\n        else {\r\n          [ s.p1MsgClass, s.saveActive, s.p1MsgTxt ] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n      }\r\n      if (this.state.bookingType === \"ts-veranstaltung\") {\r\n          [ s.commentMsgClass, s.saveActive, s.commentMsgTxt ] = Messages.veranstaltung\r\n      }\r\n      \r\n      if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)/ig)) {\r\n        // Jetzt die Berechtigungen nach Alter, Status, Zeitpunkt. Message an der Spielzeit\r\n        // Diese Bedingungen sind von der Entscheidungstabelle (Dokumentation, Excel) abgeleitet\r\n        const dToday = new Date()\r\n        const dH = dToday.getHours()\r\n        const dM = dToday.getMinutes()\r\n        const minutesToday = (dH * 60 + dM)\r\n        if    ( (start - minutesToday) > Config.maxMinutesDistance && !condEinSpielerErwVoll && !condSonnOderFeiertag && ende > (Config.eveningTime / 100 * 60) ) {\r\n            [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.erwachsenenvorrecht;\r\n            s.overbooked = true\r\n        }\r\n      }\r\n\r\n      // Auswertung Spielzeit formal, Message an der Spielzeit\r\n      if (start >= ende) {\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.zeit;\r\n      }\r\n      else if (this.state.bookingType === \"ts-einzel\") {\r\n        if ((ende - start) > Config.singleTime) {\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.einzeldauer;\r\n        }\r\n      }\r\n      else if (this.state.bookingType === \"ts-doppel\") {\r\n        if ((ende - start) > Config.doubleTime) {\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.doppeldauer;\r\n        }\r\n      }\r\n      else if (this.state.bookingType === \"ts-turnier\") {\r\n        if ((ende - start) !== Config.turnierTime) {\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.turnierspieldauer;\r\n        } else {\r\n          [ s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt ] = Messages.turnier;\r\n        }\r\n      }\r\n\r\n      // Nicht-Einzel/Doppel ist nur für Berechtigte speicher- und löschbar\r\n      if (this.state.bookingType.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)) {\r\n        s.saveActive   = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n      }\r\n      if (this.state.bookingType.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)) {\r\n        s.deleteActive = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n      }\r\n\r\n      // Gäste und Jugendliche dürfen an Arbeitstagen abends erst kurz vor Beginn der Abendspielzeit buchen\r\n\r\n      // Einzel-/Doppelbuchungen sind nur durch einen der Spieler änderbar\r\n      // ########## VORSICHT: IMMER GEGEN DIE GESPEICHERTE VERSION PRÜFEN \r\n\r\n      // Alle Ergebnisse in den State\r\n      this.setState(s)\r\n\r\n    });\r\n  }\r\n}\r\n\r\nexport default BelForm;\r\n","import React, { Component } from 'react';\r\nimport BelForm from './BelForm';\r\nimport { Link } from 'react-router-dom';\r\nimport Config from './Defaults';\r\n\r\nclass Belegung extends Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      belegung : [],\r\n      isLoading : false,\r\n      error : false,\r\n    };\r\n  }  \r\n  componentWillMount() {\r\n    const {op} = this.props.location.state;\r\n    if (op === \"update\") {\r\n      const {i, d} = this.props.location.state;\r\n      this.updateBel(i, d);\r\n    } else if (op === \"new\") {\r\n      const {c, d} = this.props.location.state;\r\n      this.newBel(c, d);\r\n    }\r\n  }\r\n  \r\n  updateBel(id, day) {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/platz.php?op=r&rid=\" + id;\r\n  \r\n    this.setState({isLoading : true});\r\n    \r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then(result => {\r\n      if (result.ok) {\r\n        if (result.redirected) {\r\n          console.log(\"BelDetails.js/Checkuser: Authentifizierungsfehler\")\r\n          window.location.href = result.url\r\n        }\r\n        return result.json();\r\n      } else {\r\n        throw new Error('Fehler beim Laden der Platzbuchungsdetails');\r\n      }\r\n    })\r\n    .then(result => {\r\n      let belegung = result.records.map( r => {\r\n        return (\r\n          <div key={r.id} className=\"p-2\">\r\n              <Link to={{ pathname: '/intern/tafel/', state: {d: day} }}><p className=\"btn btn-secondary\">Zurück</p></Link>\r\n              <BelForm r={r} userId={this.props.userId} permissions={this.props.permissions} />\r\n          </div>\r\n        )\r\n      })\r\n      this.setState({ belegung: belegung })\r\n    })\r\n    .catch(error => this.setState({ error, isLoading: false }));\r\n  }\r\n  \r\n  newBel(court, day)\r\n  {\r\n    let r = getEmptyBel(court, day);\r\n    let belegung = [\r\n        <div key={-1} className=\"p-2\">\r\n            <Link to={{ pathname: '/intern/tafel/', state: {d: day} }}><p className=\"btn btn-secondary\">Zurück</p></Link>\r\n            <BelForm r={r} userId={this.props.userId} permissions={this.props.permissions} />\r\n        </div>\r\n    ];\r\n    this.setState({ belegung: belegung })\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <div>{this.state.belegung}</div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getEmptyBel(court, day) {\r\n  return {\r\n    id: 0,\r\n    user_id: 0,\r\n    p1: '',\r\n    p2: '',\r\n    p3: '',\r\n    p4: '',\r\n    court: court,\r\n    starts_at: day + ' 08:00:00',\r\n    ends_at: day + ' 09:00:00',\r\n    booking_type: '',\r\n    geburtsdatum: '0000-00-00',\r\n    p1id: 0,\r\n    p2id: 0,\r\n    p3id: 0,\r\n    p4id: 0,    \r\n  }\r\n}\r\nexport default Belegung;\r\n  ","import React, { Component } from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport Belegungstag from './Belegungstag';\r\nimport Belegung from './Belegung';\r\n\r\n\r\nclass Routing extends Component {\r\n    render() {\r\n      return (\r\n        <Switch>\r\n          <Route exact path='/intern/tafel/belegung' render={(props) => <Belegung {...props} userId={this.props.userId} permissions={this.props.permissions} />} />\r\n          <Route render={(props) => <Belegungstag {...props} userId={this.props.userId} permissions={this.props.permissions} />} />\r\n        </Switch>\r\n      )\r\n    }\r\n}\r\n\r\n\r\nexport default Routing;\r\n  ","import React, { Component } from 'react';\r\nimport Routing from \"./Routing\";\r\nimport Config from \"./Defaults\";\r\n\r\n\r\nclass App extends Component \r\n{\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      user: {},\r\n      isLoggedIn: false,\r\n      permissions: 0,\r\n      renderData: [],\r\n      isLoading1: true,\r\n      isLoading2: true,\r\n    };\r\n  }\r\n  \r\n  componentDidMount()\r\n  {\r\n    this.setState(() => ({ isLoading1: true , isLoading2: true}));\r\n    \r\n    if (Config.prod) \r\n    { \r\n      this.checkUser();\r\n      this.setPermission();\r\n    } \r\n    else \r\n    {\r\n      // In der Testumgebung simulierter User\r\n      this.setState(() => ({user: Config.testuser, permissions: Config.testuser.permissions}));\r\n\r\n      // Re-rendering - sollte nur auf passiv genutzten Geräten (z. B. Monitor an Platz) verwendet werden\r\n      // this.interval = setInterval(()  => this.forceUpdate(), 1000)\r\n    }\r\n  }\r\n\r\n  checkUser() \r\n  {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/checkuser.php\";\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then( (res) => {\r\n      if (res.ok) {\r\n        res.json()\r\n        .then( (user) => {\r\n          if (user.retcode === 'OK') {\r\n            this.setState(() => ({user: user.user, isLoading1: false}));\r\n          } else {\r\n            // console.log(\"App.js/Checkuser: Authentifizierungsfehler\")\r\n            window.location.href = Config.protokoll + Config.hostname + Config.loginPage;\r\n          }\r\n        });\r\n      }\r\n    })\r\n  }\r\n  \r\n  setPermission() \r\n  {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/checkpermission.php\";\r\n    // console.log(url)\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then( (res) => {\r\n      if (res.ok) {\r\n        res.json()\r\n        .then( (permissions) => {\r\n          // console.log(permitted.retcode)\r\n          this.setState(() => ({permissions: permissions.retcode, isLoading2: false}))\r\n        })\r\n      }\r\n    })\r\n  }\r\n  \r\n  render() \r\n  {\r\n    const { isLoading1, isLoading2 } = this.state;\r\n    if (Config.prod && (isLoading1 || isLoading2)) {\r\n      return <p>Loading...</p>\r\n    } else {\r\n      return (\r\n        <React.Fragment>\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col text-left\">\r\n                <img src=\"/images/tcoplain_0,1x.png\" alt=\"TCO -Logo\" />\r\n              </div>\r\n              <div className=\"col\">\r\n                <span className=\"h6 text-center ml-2\"><a href=\"/intern/tafel/\" id=\"appname\">Platzbuchung</a></span> \r\n                <span className=\"text-center ml-2\"><small> ({this.state.user.vorname + ' ' + this.state.user.nachname})</small></span>\r\n              </div>\r\n              <div className=\"col\">\r\n                <div className=\"small align-bottom\"><span className=\"pl-5\"><a href=\"/intern/logout.php\"><img src=\"/images/logout.png\" alt=\"Logout\" /></a></span></div> \r\n              </div>\r\n            </div>\r\n          </div>\r\n              \r\n          <Routing userId = {this.state.user.id} permissions = {this.state.permissions}/>\r\n          <footer className=\"blockquote-footer\">(c) 2019 by Conny Roloff. Dem TC Olching zur kostenlosen Nutzung zur Verfügung gestellt.</footer>\r\n        </React.Fragment>\r\n      )}\r\n    }\r\n  }\r\n\r\n\r\nexport default App;\r\n  ","import 'babel-polyfill'; \r\nimport 'react-app-polyfill/ie11';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport App from './components/App';\r\n\r\nReactDOM.render((\r\n  <Router>\r\n    <App />\r\n  </Router>\r\n), document.getElementById('root'));\r\n\r\n// import index from \"./js/index\";\r\n"],"sourceRoot":""}